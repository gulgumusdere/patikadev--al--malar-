function AkaHTML5MediaAnalytics(e){var t="3.15.2",a=document.currentScript,n=null,r=null,s=!0,o=null,l=null,d=!1,c=null,u=!1,m="http://media-analytics.akamaized.net",f=null,h=(new Date).getTime(),p=[];p.push({api:"originUrl",value:location.protocol+"//"+location.hostname});var g=!1,v=this;function y(){return(65536*(1+Math.random())|0).toString(16).substring(1)}function S(){return y()+y()+"-"+y()+"-"+y()+"-"+y()+"-"+y()+y()+y()}e&&(e.loaderName&&(o=e.loaderName),e.loaderVersion&&(l=e.loaderVersion)),a?n=a.src:ot("Should be Internet Explorer");var T,b,k,A,L,I=I||function(e,t){var a={},i=a.lib={},n=i.Base=function(){function e(){}return{extend:function(t){e.prototype=this;var a=new e;return t&&a.mixIn(t),a.$super=this,a},create:function(){var e=this.extend();return e.init.apply(e,arguments),e},init:function(){},mixIn:function(e){for(var t in e)e.hasOwnProperty(t)&&(this[t]=e[t]);e.hasOwnProperty("toString")&&(this.toString=e.toString)},clone:function(){return this.$super.extend(this)}}}(),r=i.WordArray=n.extend({init:function(e,t){e=this.words=e||[],this.sigBytes=null!=t?t:4*e.length},toString:function(e){return(e||o).stringify(this)},concat:function(e){var t=this.words,a=e.words,i=this.sigBytes;e=e.sigBytes;if(this.clamp(),i%4)for(var n=0;n<e;n++)t[i+n>>>2]|=(a[n>>>2]>>>24-n%4*8&255)<<24-(i+n)%4*8;else if(65535<a.length)for(n=0;n<e;n+=4)t[i+n>>>2]=a[n>>>2];else t.push.apply(t,a);return this.sigBytes+=e,this},clamp:function(){var t=this.words,a=this.sigBytes;t[a>>>2]&=4294967295<<32-a%4*8,t.length=e.ceil(a/4)},clone:function(){var e=n.clone.call(this);return e.words=this.words.slice(0),e},random:function(t){for(var a=[],i=0;i<t;i+=4)a.push(4294967296*e.random()|0);return r.create(a,t)}}),s=a.enc={},o=s.Hex={stringify:function(e){for(var t=e.words,a=(e=e.sigBytes,[]),i=0;i<e;i++){var n=t[i>>>2]>>>24-i%4*8&255;a.push((n>>>4).toString(16)),a.push((15&n).toString(16))}return a.join("")},parse:function(e){for(var t=e.length,a=[],i=0;i<t;i+=2)a[i>>>3]|=parseInt(e.substr(i,2),16)<<24-i%8*4;return r.create(a,t/2)}},l=s.Latin1={stringify:function(e){for(var t=e.words,a=(e=e.sigBytes,[]),i=0;i<e;i++)a.push(String.fromCharCode(t[i>>>2]>>>24-i%4*8&255));return a.join("")},parse:function(e){for(var t=e.length,a=[],i=0;i<t;i++)a[i>>>2]|=(255&e.charCodeAt(i))<<24-i%4*8;return r.create(a,t)}},d=s.Utf8={stringify:function(e){try{return decodeURIComponent(escape(l.stringify(e)))}catch(e){throw Error("Malformed UTF-8 data")}},parse:function(e){return l.parse(unescape(encodeURIComponent(e)))}},c=i.BufferedBlockAlgorithm=n.extend({reset:function(){this._data=r.create(),this._nDataBytes=0},_append:function(e){"string"==typeof e&&(e=d.parse(e)),this._data.concat(e),this._nDataBytes+=e.sigBytes},_process:function(t){var a=this._data,i=a.words,n=a.sigBytes,s=this.blockSize,o=n/(4*s);t=(o=t?e.ceil(o):e.max((0|o)-this._minBufferSize,0))*s,n=e.min(4*t,n);if(t){for(var l=0;l<t;l+=s)this._doProcessBlock(i,l);l=i.splice(0,t),a.sigBytes-=n}return r.create(l,n)},clone:function(){var e=n.clone.call(this);return e._data=this._data.clone(),e},_minBufferSize:0});i.Hasher=c.extend({init:function(){this.reset()},reset:function(){c.reset.call(this),this._doReset()},update:function(e){return this._append(e),this._process(),this},finalize:function(e){return e&&this._append(e),this._doFinalize(),this._hash},clone:function(){var e=c.clone.call(this);return e._hash=this._hash.clone(),e},blockSize:16,_createHelper:function(e){return function(t,a){return e.create(a).finalize(t)}},_createHmacHelper:function(e){return function(t,a){return u.HMAC.create(e,a).finalize(t)}}});var u=a.algo={};return a}(Math);function E(e,t){if(null!=e&&""!=e){try{var a=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(e);void 0===a[1]?t.protocol=location.protocol:t.protocol=a[1],t.hostName=a[2],t.port=a[3]?a[3]:"80",t.path=a[4];var i=t.path.split("/"),n=i.length;t.streamName=i[n-1];var r=t.streamName.toLowerCase();-1==r.indexOf(".m3u")&&-1==r.indexOf("manifest")&&-1==r.indexOf(".f4m")&&-1==r.indexOf(".mpd")||n>=3&&(t.streamName=i[n-2]+"/"+i[n-1]),t.hash=a[5]?a[5]:"",t.search=a[6]?a[6]:"",t.host=t.hostName+":"+t.port}catch(e){ot("Exception,  parseStreamUrl :"+e)}}}function C(e,t){return null!=e?e:(new Date).getTime()}function w(e){return C(e)-h}b=(k=(T=I).lib).WordArray,k=k.Hasher,A=[],L=T.algo.SHA1=k.extend({_doReset:function(){this._hash=b.create([1732584193,4023233417,2562383102,271733878,3285377520])},_doProcessBlock:function(e,t){for(var a=this._hash.words,i=a[0],n=a[1],r=a[2],s=a[3],o=a[4],l=0;80>l;l++){if(16>l)A[l]=0|e[t+l];else{var d=A[l-3]^A[l-8]^A[l-14]^A[l-16];A[l]=d<<1|d>>>31}d=(i<<5|i>>>27)+o+A[l],d=20>l?d+(1518500249+(n&r|~n&s)):40>l?d+(1859775393+(n^r^s)):60>l?d+((n&r|n&s|r&s)-1894007588):d+((n^r^s)-899497514),o=s,s=r,r=n<<30|n>>>2,n=i,i=d}a[0]=a[0]+i|0,a[1]=a[1]+n|0,a[2]=a[2]+r|0,a[3]=a[3]+s|0,a[4]=a[4]+o|0},_doFinalize:function(){var e=this._data,t=e.words,a=8*this._nDataBytes,i=8*e.sigBytes;t[i>>>5]|=128<<24-i%32,t[15+(i+64>>>9<<4)]=a,e.sigBytes=4*t.length,this._process()}}),T.SHA1=k._createHelper(L),T.HmacSHA1=k._createHmacHelper(L),function(){var e=I,t=e.enc.Utf8;e.algo.HMAC=e.lib.Base.extend({init:function(e,a){e=this._hasher=e.create(),"string"==typeof a&&(a=t.parse(a));var i=e.blockSize,n=4*i;a.sigBytes>n&&(a=e.finalize(a));for(var r=this._oKey=a.clone(),s=this._iKey=a.clone(),o=r.words,l=s.words,d=0;d<i;d++)o[d]^=1549556828,l[d]^=909522486;r.sigBytes=s.sigBytes=n,this.reset()},reset:function(){var e=this._hasher;e.reset(),e.update(this._iKey)},update:function(e){return this._hasher.update(e),this},finalize:function(e){var t=this._hasher;e=t.finalize(e);return t.reset(),t.finalize(this._oKey.clone().concat(e))}})}(),function(){var e,t=I,a=(e=t.lib).Base,i=e.WordArray,n=(e=t.algo).HMAC,r=e.PBKDF2=a.extend({cfg:a.extend({keySize:4,hasher:e.SHA1,iterations:1}),init:function(e){this.cfg=this.cfg.extend(e)},compute:function(e,t){var a=this.cfg,r=n.create(a.hasher,e),s=i.create(),o=i.create([1]),l=s.words,d=o.words,c=a.keySize;for(a=a.iterations;l.length<c;){var u=r.update(t).finalize(o);r.reset();for(var m=u.words,f=m.length,h=u,p=1;p<a;p++){h=r.finalize(h),r.reset();for(var g=h.words,v=0;v<f;v++)m[v]^=g[v]}s.concat(u),d[0]++}return s.sigBytes=4*c,s}});t.PBKDF2=function(e,t,a){return r.create(a).compute(e,t)}}();var P=!1;if(window)try{P=!!window.XDomainRequest}catch(e){P=!1}var R={},x={},M=null,B={eventCode:"",beaconId:"",sequenceId:"",logType:"",endOfStream:"",logVersion:"",formatVersion:"",visitId:"",errorCode:"",partNumber:"",totalParts:"",hostName:"",streamName:"",port:"",protocol:"",userAgent:"",playerType:"",os:"",format:"",connectTime:"",bufferingTime:"",startupTime:"",streamLength:"",bytesTotal:"",browser:"",browserSize:"",videoSize:"",streamUrl:"",deliveryType:"",pluginVersion:"",beaconVersion:"",serverIp:"",playerFormat:"",outlierStartupTime:"",isFirstTitle:"",rebufferSessionH:"",sequenceIdH:"",isSessionWithRebufferH:"",playerState:"",currentStreamTime:"",currentClockTime:"",playClockTime:"",playStreamTime:"",rebufferCount:"",rebufferTime:"",pauseCount:"",pauseDuration:"",pauseIntervalsAsString:"",seekCount:"",seekTime:"",seekIntervalsAsString:"",pauseSeekSession:"",resumeBufferCount:"",resumeBufferTime:"",isView:"",isSessionWithRebuffer:"",logInterval:"",rebufferSession:"",socialSharing:"",endReasonCode:"",totalPlayClockTime:"",totalPlayStreamTime:"",totalRebufferCount:"",totalRebufferTime:"",totalAdPlayClockTime:"",totalAdStartCount:"",totalAdAbandonCount:"",lastHTime:"",isVisitStart:"",isVisitEnd:"",visitAttempts:"",visitPlays:"",visitViews:"",visitErrors:"",visitInterval:"",visitPlayClockTime:"",visitPlayStreamTime:"",visitRebufferCount:"",visitRebufferTime:"",visitStartupErrors:"",visitAdPlayClockTime:"",visitAdStartCount:"",visitAdAbandonCount:"",visitUniqueTitles:"",adAbandonCount:"",adPauseTime:"",adStartupTime:"",adPlayClockTime:"",adCount:"",adSession:"",sessionId:"",attemptId:"",playerReferrer:"",ais_idpId:"",ais_idpName:"",ais_idpDisplayName:"",ais_idpUrl:"",ais_queryToken:"",ais_aisuid:"",qualityOfExperience:"",transitionStreamTimeSession:"",transitionUpSwitchCount:"",transitionDownSwitchCount:"",averagedBitRate:"",fullOs:"",longitude:"",latitude:"",connectivity:""},D={title:!1,category:!1,subCategory:!1,show:!1,contentLength:!1,contentType:!1,device:!1,deliveryType:!1,playerId:!1,eventName:!1},N={},O={};N.isBrightcoveVideo=!1,N.objectBased=!1,N.videoPassed=!1;var U=!1,H=!1,V={},_={},F=!1,j=[],q={timer:null,queue:[],browserClose:!1,enabled:!0,time:250},W={},z=[],X={},K={},G={seekThreshold:2e3,visitTimeout:36e5},Q={},J={},Y={},$={},Z=100,ee={},te=!1,ae=!1,ie={fastTCPFailed:!1,fastTCPEnabled:!1},ne=[],re={dataSent:{}},se=1,oe=-1,le={},de=[],ce={pageURLCsmaDebug:0,configURLCsmaDebug:0,configDebug:0,windowOpened:!1,logStoredMsg:!0,printException:!1};function ue(){this.aisRetries=0,this.aisRequestLimit=3,this.aisRequestInterval=3e4,this.requestFailed=!1}var me=new ue,fe={setDataArr:["adId","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"],clearAdAnalytics:function(){this.isAdLoaded=!1,this.isAdStarted=!1,this.id="",this.type="0",this.startPos="0",this.playBucket="-1",this.endStatus="2",this.adLoadTime=null,this.adStartTime=null,this.adStartupTime="0";for(var e=0;e<this.setDataArr.length;e++)this[this.setDataArr[e]]=""}},he={bitRateArr:[],currentBitRate:"-",currentStartPos:0,bitRateCount:{},bitRatePlayTime:{},bitRateBucketMap:{},clearBitRate:function(){this.bitRateArr=[],this.currentBitRate="-",this.bitRateCount={},this.bitRatePlayTime={}},updateBitRateArr:function(e){if(this.bitRateArr.length>0){var t=this.bitRateArr.length,a=he.bitRateArr[t-1];this.currentBitRate==a.bitRate?a.playTime+=e:this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)}else this.pushInBitRateArr(e,this.currentBitRate,this.currentStartPos)},pushInBitRateArr:function(e,t,a){this.bitRateArr.push({bitRate:t,playTime:e,startPos:a})},populateBitRateBucketMap:function(e,t){var a,i=!1,n=$.bitRateBucketTimes;for(var r in"-"!=e&&""!==e&&(e=parseInt(e/1e3)),n)if(i=!1,a=n[r],"-"==e||""===e||e<0){if(!a.max&&!a.min){i=!0;break}}else if(a.max&&a.min){if(e>=a.min&&e<a.max){i=!0;break}}else if(a.max){if(e<a.max){i=!0;break}}else if(a.min&&e>=a.min){i=!0;break}i&&(this.bitRateBucketMap[r]+=t)},findMaxPersistentBitRate:function(){try{if(this.bitRatePlayTime){var e=0,t=-1;for(var a in this.bitRatePlayTime)this.bitRatePlayTime[a]>t&&(t=this.bitRatePlayTime[a],e=a);if(0!==e)return e}}catch(e){ot("Exception, find max persistent bit rate")}},getTransitionSession:function(e){try{var t,a,i,n=null,r="",s=0,o=0,l=0,d=!0;for(a in this.bitRateArr.length>0&&"-"==(t=this.bitRateArr[0]).bitRate&&(d=!1,this.bitRateArr[1]&&"-"!=this.bitRateArr[1].bitRate&&(d=!0,this.bitRateArr[1].startPos=this.bitRateArr[0].startPos,this.bitRateArr[1].playTime+=this.bitRateArr[0].playTime,this.bitRateArr.shift())),this.bitRateBucketMap)this.bitRateBucketMap[a]=0;for(s=0;s<this.bitRateArr.length;s++){(t=this.bitRateArr[s]).bitRate in this.bitRateCount?0!=s&&this.bitRateCount[t.bitRate]++:this.bitRateCount[t.bitRate]=1,""!=t.bitRate&&"-"!=t.bitRate&&(t.bitRate in this.bitRatePlayTime?this.bitRatePlayTime[t.bitRate]+=t.playTime:this.bitRatePlayTime[t.bitRate]=t.playTime),i=this.bitRateCount[t.bitRate],n?n+=","+t.bitRate+":"+t.startPos+":"+t.playTime+"::"+i:n=t.bitRate+":"+t.startPos+":"+t.playTime+"::"+i,this.populateBitRateBucketMap(t.bitRate,t.playTime);try{d&&(o+=t.bitRate*t.playTime,l+=t.playTime)}catch(e){}}for(a in e.maxPersistentBitRate=this.findMaxPersistentBitRate(),e.transitionStreamTimeSession=n,this.bitRateBucketMap)r?r+=","+a+":"+this.bitRateBucketMap[a]:r=a+":"+this.bitRateBucketMap[a];e.bitRateBucketTimes=r;try{e.averagedBitRate=d&&l&&0!=l?o+":"+l:null}catch(e){}}catch(e){ot("Exception, get transition Session :"+e)}}};amaURLUtility=function(){},amaURLUtility.isURL=function(e){return!!new RegExp("((http|https)(://))?([a-zA-Z0-9]+[.]{1}){2}[a-zA-z0-9]+(/{1}[a-zA-Z0-9]+)*/?","i").test(e)},amaURLUtility.parseURLComponents=function(e){var t={};try{var a=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(e);void 0===a[1]?t.protocol=location.protocol:t.protocol=a[1],t.hostName=a[2],t.port=a[3]?a[3]:"80",t.path=a[4];var i=this.path.split("/"),n=i.length;t.name=i[n-1];var r=t.name.toLowerCase();-1==r.indexOf(".m3u")&&-1==r.indexOf("manifest")&&-1==r.indexOf(".f4m")&&-1==r.indexOf(".mpd")||n>=3&&(t.name=i[n-2]+"/"+i[n-1]),t.hash=a[5]?a[5]:"",t.search=a[6]?a[6]:"",t.host=t.hostName+":"+t.port}catch(e){ot("Exception,  parseStreamUrl :"+e)}return t},streamError={InvalidURL:"URL is not valid",ParsingFailed:"Failed to parse stream URL",Invalid_Manifest:"Invalid manifest received",Invalid_Stream:"Stream is not valid",NoError:"success"},streamInfoBase=function(e,t){this.url=e,this.name=null,this.length=0,this.format=null,this.deliveryType="O",this.isValid=!1,this.streamType=null,this.callback=t},streamInfoBase.prototype.getStreamURL=function(){return this.url},streamInfoBase.prototype.getStreamName=function(){return this.name},streamInfoBase.prototype.getStreamLength=function(){return this.length},streamInfoBase.prototype.getStreamFormat=function(){return this.format},streamInfoBase.prototype.getDeliveryType=function(){return this.deliveryType},streamInfoBase.prototype.getStreamType=function(){return this.streamType},streamInfoBase.prototype.getCallback=function(){return this.callback},streamInfoBase.prototype.parseURL=function(){try{var e=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(this.url);void 0===e[1]?this.protocol=location.protocol:this.protocol=e[1],this.hostName=e[2],this.port=e[3]?e[3]:"80",this.path=e[4];var t=this.path.split("/"),a=t.length;this.name=t[a-1];var i=this.name.toLowerCase();-1==i.indexOf(".m3u")&&-1==i.indexOf("manifest")&&-1==i.indexOf(".f4m")&&-1==i.indexOf(".mpd")||a>=3&&(this.name=t[a-2]+"/"+t[a-1]),this.hash=e[5]?e[5]:"",this.search=e[6]?e[6]:"",this.host=this.hostName+":"+this.port}catch(e){ot("Exception,  parseStreamUrl :"+e)}};var pe=function(e,t,a,i){try{e.prototype=Object.create(t.prototype,{url:{value:a,enumerable:!1},callback:{value:i,enumerable:!1}})}catch(e){ot("Exception thrown from InheritObject"+e)}};hlsStreamInfo=function(e,t){return this.recursiveDownload=!1,this.isParsed=!1,this.parse=function(e){try{if(!e)return streamError.InvalidURL;if(-1===e.search("#EXTM3U"))return streamError.ParsingFailed;this.streamType="hls",this.format="L",this.parseURL();var t,a,i=e.split("\n"),n="",r=/PROGRAM-ID=(\d+)/;if(i){for(a=0;a<i.length;a++)if(t=r.exec(i[a])){if(t[1]==n)break;n=t[1]}a!=i.length&&(this.format="L")}var s,o,l=this.getStreamURL();if(l){var d=/^(\w+?:)?\/\/([^\/:]+):?([^\/]+)?(\/[^#?]*)#?([^?]+)?\??(.+)?/.exec(l);s=void 0===d[1]?location.protocol:d[1],o=d[2],d[3]?d[3]:"80",d[4]}if(r=/^#EXT((INF)|(-X-STREAM-INF))[^\n]*\n([^\n]*)\n/m,ot("Checking"),t=r.exec(e))if(ot("Checking done "+t[4]),new RegExp(".m3u8").exec(t[4])&&s&&o)try{this.recursiveDownload=!0;var c,u=new XMLHttpRequest;ot("Requesting URL = "+(c=amaURLUtility.isURL(t[4])?t[4]:s+"//"+o+t[4])),u.open("GET",c,!0),u.onreadystatechange=(m=this,function(){ot("current content type from stream url is = "+this.getResponseHeader("content-type")),4===this.readyState&&(200===this.status&&this.responseText&&(/^#EXT-X-ENDLIST/m.exec(this.responseText)?m.deliveryType="O":(m.deliveryType="L",m.length="-1")),m.getCallback()&&m.getCallback()(m))}),u.overrideMimeType&&u.overrideMimeType("text/plain")}catch(e){ot("parse, Exception,  parsing play list, "+e)}else/^#EXT-X-ENDLIST/m.exec(e)&&(this.deliveryType="O")}catch(e){ot("Exception,  parse : "+e)}var m;return this.isParsed=!0,streamError.NoError},this.parse(e)===streamError.NoError?(!1===this.recursiveDownload&&this.getCallback()(this),this.streamType="hls",this.deliveryType="O",this):t?(this.streamType="hls",this.format="L",this.deliveryType="O",this.length=0,this.parseURL(),this.getCallback()(this),this):void 0},dashStreamInfo=function(e,t){this.isParsed=!1;try{this.parse=function(e){if(!e)return streamError.InvalidURL;this.parseURL(),this.format="Dash",this.streamType="dash";var t=(new DOMParser).parseFromString(e,"text/xml");if(!t)return streamError.ParsingFailed;var a=t.getElementsByTagName("MPD");if(!a||!a[0])return streamError.ParsingFailed;if("dynamic"===a[0].getAttribute("type"))this.deliveryType="L",this.length=0;else{this.deliveryType="O";var i=a[0].getAttribute("mediaPresentationDuration").replace("PT",""),n=i.search("H"),r=0;if(this.length=0,-1!==n){var s=Number(i.substring(0,n));isNaN(s)||(this.length+=60*s*60*1e3,r=n+1)}var o=i.search("M");if(-1!==o){var l=Number(i.substring(r,o));isNaN(l)||(this.length+=60*l*1e3,r=o+1)}var d=i.search("S");if(-1!==d){var c=Number(i.substring(r,d));isNaN(c)||(this.length+=1e3*c)}ot("Current stream length = "+this.length)}return this.getCallback()(this),this.isParsed=!0,streamError.NoError}}catch(e){ot("Exception thrown from dashStreamInfo "+e)}return this.parse(e)===streamError.NoError?this:t?(this.format="Dash",this.streamType="dash",this.deliveryType="O",this.length=0,this.parseURL(),this.getCallback()(this),this):void 0},nonAdaptiveStream=function(e,t){try{return this.format="P",this.deliveryType="O",this.streamType="nonAdaptiveStream",this.length=0,this.parseURL(),this.getCallback()(this),this}catch(e){ot("Exception thrown from nonAdaptiveStream"+e)}};var ge={FactoryWithURL:function(e,t,a){try{var i=new XMLHttpRequest;i.open("GET",t,!0),i.onreadystatechange=function(){4===this.readyState&&200===this.status&&this.responseText&&ge.FactoryWithContent(e,t,this.responseText,a,!1)},i.send(null)}catch(e){ot("Exception thrown from streamFactory.FactoryWithURL"+e)}},FactoryWithContent:function(e,t,a,i,n){var r;try{"hls"===e?(pe(hlsStreamInfo,streamInfoBase,t,i),r=new hlsStreamInfo(a,n)):"dash"===e?(pe(dashStreamInfo,streamInfoBase,t,i),r=new dashStreamInfo(a,n)):(pe(nonAdaptiveStream,streamInfoBase,t,i),r=new nonAdaptiveStream(a,n))}catch(e){ot("Exception thrown from streamFactory.FactoryWithContent "+e)}return r}};StreamTypeDetector=function(e,t,a,i){function n(e,t,a){ot("Mime type method didn't work. Lets apply parsers one after another - Brute force");var i=ge.FactoryWithContent("hls",e,t,a,!1);i.isParsed||(ot("not a HLS stream"),(i=ge.FactoryWithContent("dash",e,t,a,!1)).isParsed||(ot("not Dash either... Assuming Progressive download"),i=ge.FactoryWithContent("nonAdaptive",e,t,a,!1)))}try{if(!e||""===e)return streamError.Invalid_Stream;var r=RegExp(".m3u8"),s=RegExp(".mpd");if(a){if(r.exec(e))return ot("Found m3u8 as an extension"),void ge.FactoryWithURL("hls",e,i);if(s.exec(e))return ot("Found mpd as an extension"),void ge.FactoryWithURL("dash",e,i);ot("Couldn't find either m3u8 or Dash will try mime type");var o=new XMLHttpRequest;ot("To get mime type trying HEAD request"),o.open("HEAD",o,!0),o.overrideMimeType&&o.overrideMimeType("text/xml"),o.onreadystatechange=function(){if(this.readyState===this.DONE){var t=this.getResponseHeader("content-type");"application/x-mpegURL"===t||"vnd.apple.mpegURL"===t?(ot("Rceived mime type is m3u8"),ge.FactoryWithContent("hls",e,this.responseText,i)):"application/dash+xml"===t?(ot("Rceived mime type is dash"),ge.FactoryWithContent("dash",e,this.responseText,i)):n(e,this.responseText,i)}},o.send(null)}else r.exec(e)?(ot("Found m3u8 as an extension"),streamObj=ge.FactoryWithContent("hls",e,t,i,!0)):s.exec(e)?(ot("Found mpd as an extension"),streamObj=ge.FactoryWithContent("dash",e,t,i,!0)):n(e,t,i);return streamError.NoError}catch(e){ot("Exception thrown from StreamTypeDetector "+e)}},fragmentState={Invalid:"Invalid",InPorgress:"InProgress",Completed:"Completed"},fragment=function(e,t){this.id=e,this.bitrate=t,this.timeStamp=(new Date).getTime(),this.state=fragmentState.InPorgress,this.downloadTime=0,this.bytesDownloaded=0},streamFragments=function(){this.fragments={},this.fragmentId=0,this.downloadStarted=function(e){var t=new fragment(this.fragmentId,e);this.fragments[this.fragmentId.toString()]=t},this.cleanup=function(){for(var e in this.fragments)delete this.fragments[e]},this.downloadCompleted=function(e,t){if(this.fragments[this.fragmentId.toString()]&&this.fragments[this.fragmentId.toString()].state!==fragmentState.Completed){var a=this.fragments[this.fragmentId.toString()],i=(new Date).getTime();a.downloadTime=i-a.timeStamp,a.state=fragmentState.Completed,t?(a.bytesDownloaded=t,ot("bytesDownloaded reported = "+t)):(a.bytesDownloaded=e*a.downloadTime,ot("bytesDownloaded not reported and calculated one is = "+a.bytesDownloaded)),this.fragmentId++}}},hlsStream=function(){var e=new streamFragments;this.streamFragmentDownloadStarted=function(t){e.downloadStarted(t),0!==t&&xt(t)},this.streamFragmentDownloadCompleted=function(t){e.downloadCompleted(t,0)},this.cleanupFragments=function(){e.cleanup()},this.getBandwidthFromFragments=function(){var t=0,a=0;for(index in e.fragments){var i=e.fragments[index];i.state===fragmentState.Completed&&i.bytesDownloaded&&(t+=i.bytesDownloaded,a+=i.downloadTime)}return 0===a?0:t/a}};!function(){if("undefined"!=typeof akamaiBCVideoObject)try{var t=document.getElementsByTagName("script"),a=0,i="";if(t.length)for(a=0;a<t.length;a++)null==t[a].src||-1==t[a].src.indexOf("79423.analytics.edgesuite.net")&&-1==t[a].src.indexOf("79423.analytics.edgekey.net")||(t[a].src,""!=(i=De("configPath",t[a].src))&&(V.url=i))}catch(e){}else e&&e.configPath?(V.url=e.configPath,N.objectBased=!0):V.url=AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH;try{if(window){var n=null;ve()?(n=De("AkamaiAnalytics_configPath",window.parent.location))&&(V.url=n):(n=De("AkamaiAnalytics_configPath",window.location))&&(V.url=n)}}catch(e){}V.url&&(1==parseInt(De("enableGenericAPI",V.url))&&(N.objectBased=!0),V.beaconSent=parseInt(De("beaconSentNotify",V.url)),1==parseInt(De("setVideoObject",V.url))&&(N.videoPassed=!0),1==parseInt(De("subscribeVideo",V.url))&&(N.videoPassed=!0),1==parseInt(De("exception",V.url))&&(ce.printException=!0),ce.configURLCsmaDebug=parseInt(De("debug",V.url)))}();function ve(){var e=!1;try{if(window!==window.parent){var t={},a={},i=document.URL,n=null;document&&document.referrer&&(n=document.referrer),null!=i&&E(i,t),null!=n&&E(n,a),t.port===a.port&&t.protocol===a.protocol&&t.hostName===a.hostName&&(e=!0)}else e=!0}catch(e){}return e}try{window&&(ve()?ce.pageURLCsmaDebug=parseInt(De("AkamaiAnalytics_debug",window.parent.location)):ce.pageURLCsmaDebug=parseInt(De("AkamaiAnalytics_debug",window.location)))}catch(e){}try{"undefined"!=typeof akamaiBCVideoObject&&"undefined"!=typeof brightcovePerforceVersion&&Ft("std:pluginVersion","Brightcove-"+brightcovePerforceVersion)}catch(e){ot("Exception,  pluginVersion: "+e)}function ye(){ce.windowOpened||1!=ce.pageURLCsmaDebug&&1!=ce.configURLCsmaDebug&&1!=ce.configDebug||(u=!0,f=window.open("http://media-analytics.akamaized.net/library/debug/index.html","","status=0,toolbar=0,location=0,menubar=0,directories=0,height=680,width=1200"),function(){if(!n){var e=document.getElementsByTagName("script");if(e.length)for(i=0;i<e.length;i++)if(null!=e[i].src){var t=e[i].src;if(-1!=t.indexOf("akamaihtml5-min.js")||-1!=t.indexOf("csma.js")){n=t;break}}}}())}function Se(e,t,a,i){H||function(e,t,a,i){e&&ot("XML Request: isXDomainRequest = "+P+":::funcCallback =  :url: "+t);var n;if(null==t||"undefined"==t||""==t)return;try{if(P){n=new XDomainRequest,e&&(n.onprogress=function(){},n.ontimeout=function(){},n.onload=function(){if(ot("XML Request : xmlClient.onload"),window.DOMParser){var t=(new DOMParser).parseFromString(n.responseText,"text/xml");(a={status:"200",readyState:"4"}).responseXML=t,a.responseText=n.responseText,e(a)}else{var a;(t=new ActiveXObject("Microsoft.XMLDOM")).async=!1,t.loadXML(n.responseText),(a={status:"200",readyState:"4"}).responseXML=t,e(a)}},n.onerror=function(e){ot("XML Request : Error, loading xml. url = :"+t),-1!=t.indexOf("serverIp")&&(te=!0),-1!=t.indexOf("protocol-info")&&(ie.fastTCPFailed=!0)}),n.open("GET",t,!a);try{i?setTimeout((function(){n.send()}),100):n.send(null)}catch(e){try{n.send(null)}catch(e){}}}else(n=new XMLHttpRequest).open("GET",t,!a),e&&(n.overrideMimeType&&n.overrideMimeType("text/xml"),n.onreadystatechange=function(){ot("XML Request : xmlClient.onreadystatechange"),e(n)}),n.send(null)}catch(e){ot("Exception,  XML Request for url :"+t+",Exception:"+e)}}(e,t,a,i)}function Te(e){var t=W.common;if(null!=t){var a={};a.name=e,a.key=e,t.push(a)}}function be(e){if(R.cdn)return R.cdn;try{for(key in $.cdn){var t=$.cdn[key];if(t&&t.name&&t.value)for(var a=e[t.name],i=t.value.split(","),n=0;n<i.length;n++)if(a&&-1!=a.indexOf(i[n].trim()))return key}}catch(e){ot("Exception Get CDN"+e.message)}}function ke(e){var t="";if(-1!=e.indexOf("://")&&(i=e.indexOf("://"),e=e.substring(i+3)),-1!=e.indexOf("/")){if(i=e.indexOf("/"),-1!=e.indexOf("?")){var a=e.indexOf("?");i=i<a?i:a}t=e.substring(0,i)}else if(-1!=e.indexOf("?")){var i=e.indexOf("?");t=e.substring(0,i)}else t=e;return t}function Ae(e,t,a,i){var n=e.currentState,r=e.seekObject;"S"==i&&-1==r.seekStartStreamTime?(r.seekStartEpochTime=n.timeUpdateClockTime,r.seekEndEpochTime=t,r.seekStartStreamTime=n.timeUpdateStreamTime,r.seekEndStreamTime=a):"S"==i&&r.seekEndStreamTime==n.timeUpdateStreamTime?(r.seekEndEpochTime=t,r.seekEndStreamTime=a):-1!=r.seekStartStreamTime&&(e.seekTime+=r.seekEndEpochTime-r.seekStartEpochTime,"-"!=e.seekIntervalsAsString?e.seekIntervalsAsString+=","+r.seekStartStreamTime+":"+r.seekEndStreamTime:e.seekIntervalsAsString=r.seekStartStreamTime+":"+r.seekEndStreamTime,"-"!=e.pauseSeekSession?e.pauseSeekSession+=",S("+r.seekStartStreamTime+":"+(r.seekStartEpochTime-e.startTimer)+"-"+r.seekEndStreamTime+":"+(r.seekEndEpochTime-e.startTimer)+")":e.pauseSeekSession="S("+r.seekStartStreamTime+":"+(r.seekStartEpochTime-e.startTimer)+"-"+r.seekEndStreamTime+":"+(r.seekEndEpochTime-e.startTimer)+")",++e.seekCount,e.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1})}function Le(e,t){ot("set RebufferSession : curTime = "+t);try{var a=Math.round(t-e.lastLogTime-e.curRebufferTime),i=Math.round(e.curRebufferTime);e.currRebufferEndEpoch=Math.round(t),e.currRebufferStartEpoch=Math.round(t-i),i>G.isSessionWithRebufferLimit&&(e.isSessionWithRebuffer=1),e.rebufferSession?e.rebufferSession=e.rebufferSession+";"+a+":"+i:e.rebufferSession=a+":"+i}catch(e){ot("Error, set RebufferSession"+e.message)}}function Ie(e,t){var a=1;if(e.rebufferSessionH=null,e.rebufferSessionArrayHLine&&(!e.rebufferSessionArrayHLine||0!==e.rebufferSessionArrayHLine.length)){for(;e.rebufferSessionArrayHLine[a]&&t-e.rebufferSessionArrayHLine[a]>2*G.heartBeatInterval;)e.rebufferSessionArrayHLine.shift(),e.rebufferSessionArrayHLine.shift(),1==e.isSessionWithRebufferH&&(e.sendIsSessionWithRebufferH=0,e.isSessionWithRebufferH=null);for(;e.rebufferSessionArrayHLine[a];){var i=t-e.rebufferSessionArrayHLine[a-1],n=e.rebufferSessionArrayHLine[a]-e.rebufferSessionArrayHLine[a-1];1==e.sendIsSessionWithRebufferH&&n>G.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+i+":"+n:e.rebufferSessionH=i+":"+n,a+=2}if(a-=1,e.rebufferSessionArrayHLine[a]){i=t-e.rebufferSessionArrayHLine[a];1==e.sendIsSessionWithRebufferH&&i>G.isSessionWithRebufferLimit&&(e.isSessionWithRebufferH=1),e.rebufferSessionH?e.rebufferSessionH=e.rebufferSessionH+";"+i+":"+i:e.rebufferSessionH=i+":"+i}}}function Ee(e){var t=e.readyState,a=e.status;if(4!==parseInt(a/100)&&0!==a||(ot("readServerIp: serverIpFailed request falied as status is ,in 400 series"),te=!0),4==t&&200==a){var i,n=e.responseXML;if(n)i=n.documentElement?n.documentElement:n,ee.serverip=ae?i.getElementsByTagName("ip")[0].childNodes[0].nodeValue:i.getElementsByTagName("serverip")[0].childNodes[0].nodeValue,ot("readServerIp : diagnostics.serverip =  "+ee.serverip)}}function Ce(e){var t="",a=e.readyState,i=e.status;4!==parseInt(i/100)&&0!==i||(ot("read fast tcp: fast tcp Failed request falied as status is 400 series"),ie.fastTCPFailed=!0);try{if(4==a&&200==i){var n,r=e.responseXML;if(r)if(ot("populating fast tcp"),(n=r.documentElement?r.documentElement:r)&&n.firstElementChild){var s=n.firstElementChild,o="",l="";if(s)for(s.hasAttribute("key")&&(t=(l=s.getAttribute("key"))+":"+(o=s.childNodes[0].nodeValue));s.nextElementSibling;)(s=s.nextElementSibling).hasAttribute("key")&&(l=s.getAttribute("key"),o=s.childNodes[0].nodeValue,t?t+=","+l+":"+o:t=l+":"+o)}}t&&(ie.ftcp=t)}catch(e){ot("Exception,  read fast tcp"+e)}}function we(e,t){try{var a=e.akamai;G&&G.logInterval&&!t&&(a.fastTCPServerIpTimer=Oe(we,G.logInterval,[e])),te||function(e){var t=e.akamai;if(te)ot("getting ServerIp : serverIp request failed");else if(t.hostName)try{var a=null;t.protocol&&(-1!=t.protocol.indexOf("rtmp")?(a="http://"+t.hostName+"/fcs/ident",ae=!0):a=t.protocol+"//"+t.hostName+"/serverip",ot("getting ServerIp : serverIpPath = "+a),Se(Ee,a,!1,!0))}catch(e){te=!0,ot("getting ServerIp: error, xmphttprequest")}}(e),!ie.fastTCPFailed&&ie.fastTCPEnabled&&function(e){var t=e.akamai;if(ie.fastTCPFailed)ot("getting fast tcp: request failed");else if(t.hostName)try{var a=t.protocol+"//"+t.hostName+"/protocol-info";ot("getting fast tcp : fastTCPPath = "+a),Se(Ce,a,!1,!0)}catch(e){ie.fastTCPFailed=!0,ot("getting ServerIp: error, xmphttprequest")}}(e),te&&ie.fastTCPFailed&&Ue(a.fastTCPServerIpTimer)}catch(e){ot("Exception get fast tcp server ip")}}function Pe(e){return e.objectBased?e.errorReason?e.errorReason:Et[0]:e.externalError?e.externalError:e.error&&e.error.code?Et[e.error.code]:Et[0]}function Re(e){var t="Play.End.Detected";return e.objectBased&&e.endReason&&(t=e.endReason),t}function xe(){le.viewerId=R.viewerId?R.viewerId:null,le.viewerDiagnosticsId=R.viewerDiagnosticsId?R.viewerDiagnosticsId:R.viewerId?R.viewerId:null}function Me(e,t){var a=null;le&&le.viewerDiagnosticsId&&(a=le.viewerDiagnosticsId);var i="",n=50,r=32;if(a&&"-"!=a&&(!t||!e.xViewerId)){!function(e){var t=null;Q&&Q.viewerDiagnostics&&Q.viewerDiagnostics.salt&&Q.viewerDiagnostics.salt.version&&(t=Q.viewerDiagnostics.salt.version);e.xViewerIdVersion=t,le.xViewerIdVersion=t}(e),ot("get Viewer DiagnosticsID"),a=encodeURIComponent(a),Q&&Q.viewerDiagnostics&&Q.viewerDiagnostics.salt&&Q.viewerDiagnostics.salt.value&&(i=Q.viewerDiagnostics.salt.value),Q&&Q.viewerDiagnostics&&Q.viewerDiagnostics.salt&&Q.viewerDiagnostics.salt.iterations&&(n=Q.viewerDiagnostics.salt.iterations),Q&&Q.viewerDiagnostics&&Q.viewerDiagnostics.salt&&Q.viewerDiagnostics.salt.bytes&&(r=Q.viewerDiagnostics.salt.bytes);var s=I.PBKDF2(a,i,{keySize:r/8,iterations:n});e.xViewerId=s,le.xViewerId=s}}function Be(e,t,a){var i;"viewerId"!=t&&"clientId"!=t&&"viewerDiagnosticsId"!=t&&(a&&(R[a]?i=R[a]:e[a]&&(i=e[a])),e[t]=i)}function De(e,t,a){null==a&&(a="");try{if(""==t||null==t)return;e=e.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");var i=new RegExp("[\\?&]"+e+"=([^&#]*)").exec(t);return null==i?a:i[1]}catch(e){return ot("Exception,  getValueFromQueryString :"+e),a}}function Ne(e){Ue(e.akamai.fastTCPServerIpTimer),s&&we(e)}function Oe(e,t,a){try{var i=null;return i=setTimeout((function(){e.apply(void 0,a)}),t)}catch(n){ot("Exception, set window timeout:"+n);try{i=window.setTimeout((function(){e.apply(void 0,a)}),t)}catch(e){return null}return i}}function Ue(e){try{clearTimeout(e)}catch(t){ot("Exception clear window timeout:"+t);try{window.clearTimeout(e)}catch(e){}}}function He(e){ot("startBeaconTImer");var t=e.akamai;t.areTimerStarted||(ot("startBeaconTimer: starting beacon timer"),t.firstPLineTimer=Oe(je,G.secondaryLogTime,[e]),t.hLineTimer=Oe(qe,G.heartBeatInterval,[e]),t.fastTCPServerIpTimer=Oe(Ne,G.logInterval-5e3,[e]),e.objectBased&&(Z=500),t.pollingTimer=Oe(Kt,Z,[e]),t.areTimerStarted=!0)}function Ve(e){var t=e.akamai;t&&(t.hLineTimer&&Ue(t.hLineTimer),t.pollingTimer&&Ue(t.pollingTimer),t.fastTCPServerIpTimer&&Ue(t.fastTCPServerIpTimer),t.firstPLineTimer&&Ue(t.firstPLineTimer),me&&me.retryTimer&&Ue(me.retryTimer))}function _e(e){var t=e.akamai;re.akamai={},re.dataSent={},t.areTimerStarted=!1,t.isCLineSent=!1,t.isELineSent=!1,t.lastRebufferEndEpoch=0,t.connectTime=0,q.browserClose=!1,t.totalPlayClockTime=t.totalStreamTime=t.totalRebufferCount=t.totalRebufferTime=0,t.isVisitEnd=0,t.sequenceId="0",t.wasPutToSleep=!1,t.chasingSleep=null,t.continuousRebufferDuration=0,$t(e),t.attemptId=t.sessionId=S(),xe(),t.clientId=t.viewerId=function(e){var t=le.viewerId;if("-"!=t){if(!t)try{if(window&&window.localStorage&&window.localStorage.getItem("akamai_clientId"))t=window.localStorage.getItem("akamai_clientId");else try{t=S(),window&&window.localStorage&&window.localStorage.setItem("akamai_clientId",t)}catch(e){ot("window.localStorage Exception :"+e)}}catch(e){ot("Exception,  getting viewerId"+e),t=S()}return t}}(),Q.viewerDiagnosticsEnabled&&Me(t),t.lastPLineSentTime=t.hLineSentCount=t.lastSLineSentTime=t.lastHLineSentTime=0,t.lastHTime=0,ca("HTML_LastCLineTime"),Tt=[0,0,0,0,0,0,0,0,0,0,0,0];var a=parseInt(da("HTML_VisitCountCookie"));a&&""!=a||(t.isVisitStart=1,ua("HTML_VisitCountCookie",a=0));var i=parseInt(da("HTML_isPlayingCount"));i&&""!=i||ua("HTML_isPlayingCount",i=0);var n=da("HTML_VisitValueCookie");n&&""!=n||ua("HTML_VisitValueCookie","0|0|0|0|0|0|0|0|0|0|0|0|0");var r=da("HTML_BitRateBucketCsv");r&&""!=r||ua("HTML_BitRateBucketCsv","0,0,0,0,0,0,0,0");var s=da(dt);s&&""!=s?t.browserSessionId=t.visitId=da(dt):(t.browserSessionId=t.visitId=S(),ua(dt,t.visitId))}function Fe(e,t){var a=e.akamai;if(a.isILineSent=!0,++a.iLineCount,a.lastSLineSentTime=t,1==a.iLineCount){var i=parseInt(da("HTML_VisitCountCookie"));ua("HTML_VisitCountCookie",++i),St=t}var n=parseInt(da("HTML_VisitIntervalStartTime"));n&&" "!=n||ua("HTML_VisitIntervalStartTime",n=t),Tt[0]=1,a.sendVLine=!0}function je(e){var t=C();e.akamai.lastPLineSentTime=t,rt(e,"playing",!1,t)}function qe(e){var t=e.akamai;t.hLineTimer=Oe(qe,G.heartBeatInterval,[e]);var a=C();rt(e,"heartBeat",!1,a),t.lastHLineSentTime=a,t.hLineSentCount++,t.hLineSentCount%(G.logInterval/G.heartBeatInterval)==0&&(rt(e,"playing",!1,a),t.lastPLineSentTime=a,t.continuousRebufferDuration>=G.rebufferDurationOutlier&&(N.objectBased?(N.errorReason="Error.Continous.Rebuffer",Nt(N)):akamaiHandleError("Error.Continous.Rebuffer")))}function We(e,t,a,i){try{ot("sendBeaconCLine : endReasonCode = "+t);var n=e.akamai;n.endReasonCode=t,rt(e,"complete",a,i);var r=parseInt(da("HTML_isPlayingCount"));ua("HTML_isPlayingCount",r-=1),n.isVisitStart=null,n.isCLineSent=!0,n.firstTimePlay=!0,Ve(e),ua("HTML_LastCLineTime",i)}catch(e){ot("Exception, send beacon C Line:"+e)}}function ze(e,t,a,i){try{var n=e.akamai;if(n.errorCode=t||"UNKNOWN",ot("sendBeaconELine : errorCode = "+n.errorCode),Tt[3]=1,1==n.sequenceId&&(Tt[11]=1,xe(),Q.viewerDiagnosticsEnabled&&Me(n,!0)),n.playerState="E",rt(e,"error",a,i),n.isSLineSent){var r=parseInt(da("HTML_isPlayingCount"));ua("HTML_isPlayingCount",r-=1)}n.isELineSent=!0,n.isVisitStart=null,n.firstTimePlay=!0,Ve(e);var s=i;et(n),ua("HTML_LastCLineTime",s)}catch(e){ot("Exception, send beacon E line:"+e)}}function Xe(e,t){try{ot("sendBeaconVLine");var a=e.akamai;a.isVisitEnd=1,function(e){try{var t=da("HTML_VisitValueCookie").split("|"),a=!0;""!=t&&null!=t||(a=!1);var i=[];i=a?t:bt;for(var n=["visitAttempts","visitPlays","visitViews","visitErrors","visitPlayClockTime","visitPlayStreamTime","visitRebufferCount","visitRebufferTime","visitAdPlayClockTime","visitAdStartCount","visitAdAbandonCount","visitStartupErrors"],r=0;r<n.length;r++)e[n[r]]=i[r]}catch(e){ot("Exception get visit value  cookie : "+e)}}(a);var i=parseInt(da("HTML_VisitIntervalStartTime"));a.visitMaxPersistentBitRateBucket=function(){try{var e=da("HTML_BitRateBucketCsv").split(","),t=!1;null!=e&&""!=e||(e=kt.split(",")),e[0]=parseInt(e[0]);for(var a="00",i=e[0],n=0;n<e.length;n++)e[n]=parseInt(e[n]),e[n]>0&&(t=!0),i<e[n]&&(i=e[n],a="0"+n);if(t)return a}catch(e){ot("Exception, get visit max bit rate bucket"+e)}}(),a.visitInterval=t-i,(""==i||null==i||isNaN(i))&&(a.visitInterval=t-St),a.sessionId=null,a.attemptId=null,a.sequenceId=null,ca("HTML_BitRateBucketCsv"),ca("HTML_VisitValueCookie"),ca("HTML_VisitIntervalStartTime"),ca("HTML_LastCLineTime"),ca("HTML_VisitCountCookie"),ca("HTML_isPlayingCount"),ca(dt),rt(e,"visit",!0,t),re.akamai={},re.dataSent={},ot("sendBeaconVLine: beacon sent"),a.sendVLine=!1,a.iLineCount=0,Ue(e.akamai.clearVisitTimeoutId);var n=a.isPlaylist;e.akamai=new At(N),"undefined"!=typeof akamaiBCVideoObject&&(e.akamai.isPlaylist=n)}catch(e){ot("Exception, send beacon V line:"+e)}}function Ke(e){ot("entered setVisitValueParameters"),Tt[4]=e.totalPlayClockTime,Tt[5]=e.totalPlayStreamTime,Tt[6]=e.totalRebufferCount,Tt[7]=e.totalRebufferTime,Tt[8]=e.totalAdPlayClockTime,Tt[9]=e.totalAdStartCount,Tt[10]=e.totalAdAbandonCount,e.totalPlayClockTime>5e3&&(Tt[2]=1),function(){try{var e=da("HTML_BitRateBucketCsv"),t=kt.split(","),a=e.split(","),i=0;for(var n in he.bitRatePlayTime)n=parseInt(n),(i=parseInt((n-1)/5e5))>7&&(i=7),a[i]=parseInt(a[i])+he.bitRatePlayTime[n],t[i]=parseInt(t[i])+he.bitRatePlayTime[n];ua("HTML_BitRateBucketCsv",e=a.join(",")),kt=t.join(",")}catch(e){ot("Exception set bit rate bucketcsv"+e)}}(),function(){for(var e=da("HTML_VisitValueCookie").split("|"),t=0;t<Tt.length;t++)bt[t]+=Tt[t];ot("setVisitValueCookie :: visit values saved"+bt);for(var a=0;a<e.length;a++)e[a]=parseInt(e[a])+Tt[a];ua("HTML_VisitValueCookie",e.join("|"))}()}function Ge(e){try{var t=encodeURI(e);return t=t.replace(/#/g,"%23")}catch(t){return ot("Exception,  encoding beacon"),e}}function Qe(){try{if(ot("send delayed beacon"),q.queue&&q.queue.length>0){var e=q.queue.shift();q.timer=Oe(Qe,q.time,[]),ot("Beacon ::"+e.url,"Beacon"),Se(null,e.url,e.isSync),u&&v.processLogs({api:"reportBeaconData",value:e.url})}else ot("send delayed beacon : clear the timer"),Ue(q.timer),q.timer=null}catch(e){ot(e)}}function Je(e,t,a){if(0!=se){var i=G.beaconUrl+"?"+e;try{if(q.enabled){var n={};if(q.browserClose){if(q.timer&&Ue(q.timer),q.queue&&q.queue.length>0)for(;q.queue.length>0;)ot("put beacon on wire, send beacon from queue::"+(n=q.queue.shift()).url,"BEACON"),ot("Beacon ::"+n.url,"Beacon"),a.wasPutToSleep||(u&&v.processLogs({api:"reportBeaconData",value:n.url}),Se(null,n.url,n.isSync));ot("put beacon on wire browser close::"+i,"BEACON"),ot("Beacon ::"+i,"Beacon"),a.wasPutToSleep||(u&&v.processLogs({api:"reportBeaconData",value:i}),Se(null,i,t))}else ot("put beacon on wire pushing beacon in queue::"+i),n.url=i,n.isSync=t,q.queue.push(n),q.timer?ot("put beacon on wire: timer is running"):(ot("put beacon on wire: call send delayed beacon"),a.wasPutToSleep||Qe())}else ot("put beacon on wire"+i,"BEACON"),a.wasPutToSleep||Se(null,i,t)}catch(e){ot("failed to send beacon"),ot(e)}}else ot("put beacon On Wire, dont send beacon isACtive is zero")}function Ye(e,t,a,i){try{for(var n,r=0;r<t.length;r++){t[r].expiryDuration&&ma(e,t[r]),n=t[r].name;var s=null;n in e&&(s=e[n]),t[r].value&&(s=t[r].value),(s||0==s)&&(t[r].sendOnce?!1===t[r].isSent&&(0!=s&&(t[r].isSent=!0),$e(s,t,n,r,i,a)):$e(s,t,n,r,i,a))}}catch(e){ot("Exception, assemble logs:"+e)}}function $e(e,t,a,i,n,r){try{if(t[i].regExpJS){var s=new RegExp(t[i].regExpJS).exec(e);s&&(e=s[s.length-1])}}catch(e){ot("Exception,  evaluating regExpJS attribute for metric : "+a)}e=String(e).replace(/~/g,G.encodedParamSeparator),t[i].size&&(e=function(e,t){try{return e.substring(0,t)}catch(t){return ot("Exception,  getTruncatedMetric"+t),e}}(e,t[i].size)),t[i].key in n||(n[t[i].key]=t[i].key,r.push((G.useKey?t[i].key:a)+"="+e))}function Ze(e,t,a){try{ot("getBeaconStrings : eventCode =  "+t);var i=W.common,n=[],r=W[t];if(null==r||"undefined"==r)return void ot("getbeaconstrings, return as eventmetrics undefined");var s=[],o={};if(e.eventCode||(e.eventCode=Y[t]),Ye(e,i,n,o),"error"==t&&(e.updateTerminateMetrics(),Ke(e)),"complete"==t){e.updateTerminateMetrics();var l=W.playing;Ke(e),Ye(e,l,s,o)}Ye(e,r,s,o);var d=n.join(G.urlParamSeparator);d=Ge(d);var c=0;try{for(var u in K)G.useKey?c+=K[u].length+3+G.urlParamSeparator.length:c+=u.length+3+G.urlParamSeparator.length}catch(e){c=12}c--;var m=G.maxLogLineLength-c-d.length-3-G.beaconUrl.length;m<=0&&(m=4780-c-d.length-3-G.beaconUrl.length);var f=[],h="";if(m>0){if(s.length>0){var p,g="",v="";for(p=0;p<s.length;p++)(v=Ge(s[p])).length>=m?f.push(v):g.length+v.length<=m?g?g+=G.urlParamSeparator+v:g=v:(f.push(g),g="");""!=g&&f.push(g)}var y=f.length;if(y>1)for(var S=1;S<=y;++S)h=d+G.urlParamSeparator,h+=(G.useKey?K.partNumber:"partNumber")+"="+S+G.urlParamSeparator,h+=(G.useKey?K.totalParts:"totalParts")+"="+y+G.urlParamSeparator,h+=f[S-1],h+=G.urlParamSeparator,W[t]&&Je(h,a,e);else Je(h=d+G.urlParamSeparator+f[0]+G.urlParamSeparator,a,e)}else{var T=s.join(G.urlParamSeparator);T=Ge(T),h=d+G.urlParamSeparator+T+G.urlParamSeparator,W[t]&&Je(h,a,e)}}catch(e){ot("Exception, get beacon Strings:"+e)}}function et(e){re.fLineCount=0;var t=st(e);re.akamai=t,re.akamai.customDataPopulated=!1}function tt(e){try{for(var t in W)if(W[t])for(var a=0;a<W[t].length;a++)W[t][a].fallback&&!R[W[t][a].name]&&Be(e,W[t][a].name,W[t][a].fallback)}catch(e){}}function at(t,a,i,n){ot("updating metrics for playing and end events");var r=t.akamai,s=0,o=r.playerState,l=!0;switch(r.currentStreamTime=parseInt(Qt(t)),r.currentState.state){case vt.playing:r.playerState="PL",a-r.seekTime>0&&r.updatePlayClockTime(a-r.seekTime,r.currentState.lastEventClockTime,i),r.playClockTime<0&&(r.playClockTime=0),r.updatePlayed(r.currentStreamTime);break;case vt.pause:r.pauseDuration+=a,r.playerState="PS";break;case vt.rebuffering:if(!r.wasPutToSleep){r.rebufferTime+=a,r.curRebufferTime+=a,Le(r,i),r.playerState="B",s=i-r.curRebufferTime;break}case vt.resumeBuffering:r.playerState="RB",r.resumeBufferTime+=a;break;case vt.ended:r.updatePlayed(r.currentStreamTime);break;case vt.seek:i-r.currentState.timeUpdateClockTime>0&&Ae(r,i,r.currentStreamTime,"S"),r.currentState.timeUpdateClockTime=i,r.playerState="SK";break;default:l=!1}if("B"===r.playerState?r.continuousRebufferDuration+=r.curRebufferTime:r.continuousRebufferDuration=0,he.getTransitionSession(r),Ae(r),r.rebufferSession&&(!function(e,t){var a,i;if("B"==t){var n="";if(e.rebufferSession){for(var r=e.rebufferSession.split(";"),s=0;s<r.length;s++){var o=r[s].split(":");n+=0==s?"0:"+o[1]:r[s],s!=r.length-1&&(n+=";")}ot("newRebufferSession = "+n),e.rebufferSession=n}i=1,a=0}else i=0,a=e.lastRebufferEndEpoch>0?e.firstRebufferStartEpoch-e.lastRebufferEndEpoch:-1;e.rebufferSession=i+":"+a+";"+e.rebufferSession,e.lastRebufferEndEpoch=e.currRebufferEndEpoch}(r,o),r.firstRebufferStartEpoch=s),r.playClockTime>5e3&&(r.isView=1),l&&(r.currentState.lastEventClockTime=i),r.bytesLoaded=function(t){var a=0,i=0;try{t&&t.objectBased&&e&&e.bytesLoaded&&(i=(a=parseInt(e.bytesLoaded()))-t.akamai.lastBytesLoaded)}catch(e){}if(t.akamai.lastBytesLoaded=a,i>0)return i}(t),r.played){var d=r.played;r.playStreamTime=0;for(var c=0;c<d.length;c++)r.playStreamTime+=parseInt(d[c][1]-d[c][0]);"R"==r.logType&&(r.playStreamTime-=r.lastPlayStreamTime,r.lastPlayStreamTime+=r.playStreamTime)}n&&"Browser.Close"!=r.endReasonCode&&!r.streamTitleSwitchReason&&(r.playerState="E")}function it(e){try{var a;for(a in x)"viewerId"!=a&&"clientId"!=a&&"viewerDiagnosticsId"!=a&&"pluginVersion"!=a&&(e[a]=x[a]);"pluginVersion"in x&&(e.pluginVersion=t+":"+x.pluginVersion)}catch(e){}}function nt(e,t){ot("populate custom data, eventCode = "+t);try{if(function(e){try{var t="-";if(document&&document.referrer){var a=document.referrer;(a=a.split("/",3))&&a[2]&&(t=a[2])}window==window.top?(e.pageUrl=R.pageUrl?R.pageUrl:document.URL,e.pageHost=R.pageUrl&&ke(R.pageUrl)?ke(R.pageUrl):document.location.hostname,e.pageReferrer=R.pageReferrer?R.pageReferrer:document.referrer?document.referrer:"-",e.pageReferrerHost=R.pageReferrer&&ke(R.pageReferrer)?ke(R.pageReferrer):document.referrer?t:"-"):(e.pageUrl=R.pageUrl?R.pageUrl:document.referrer?document.referrer:"-",e.pageHost=R.pageUrl&&ke(R.pageUrl)?ke(R.pageUrl):document.referrer?t:"-",e.pageReferrer=R.pageReferrer?R.pageReferrer:"NA",e.pageReferrerHost=R.pageReferrer&&ke(R.pageReferrer)?ke(R.pageReferrer):"NA")}catch(e){}}(e),e.deliveryType=function(e){return R.deliveryType?R.deliveryType:e.deliveryType}(e),e.device=R.device?R.device:pt,!("playing"!=t&&"complete"!=t&&"feedback"!=t&&"error"!=t||(function(e){try{var t=null;if(null!=re.socialSharingObj)for(var a in re.socialSharingObj)null==t?t=a+":"+re.socialSharingObj[a]+",":t+=a+":"+re.socialSharingObj[a]+",";null!=t&&(e.socialSharing=t.substring(0,t.length-1))}catch(t){ot("Exception,  getFeedbackData"+t),e.socialSharing=null}re.socialSharingObj={}}(e),null!=e.socialSharing&&""!=e.socialSharing||"feedback"!=t||e.customDataChanged)))return void--re.fLineCount;var a;for(a in R)"viewerId"!=a&&"clientId"!=a&&"viewerDiagnosticsId"!=a&&(a in B||(e[a]=R[a]));if(me&&me.akamai)for(var i in me.akamai)e[i]=me.akamai[i];!function(e){try{var t=x.streamName?x.streamName:e.streamName}catch(e){}try{R.title?e.title=R.title:e.title=R.eventName?R.eventName:t,R.eventName?e.eventName=R.eventName:e.eventName=R.title?R.title:t}catch(e){ot("Exception,  getting title and eventName, "+e)}}(e),e.cdn=be(e)}catch(e){ot("Exception,  populate Custom Data , "+e)}}function rt(e,t,a,i){try{ot("sendBeacon: eventCode = "+t+", clocktime = "+i);var n=e.akamai,r=i-n.currentState.lastEventClockTime;if(n.logInterval="init"!=t?n.lastLogTime<=0?"0":(i-n.lastLogTime)/1e3:"0",n.customDataPopulated||nt(n,t),n.serverIp=ee.serverip?ee.serverip:"-",n.fastTCP=ie.ftcp?ie.ftcp:"-",n.eventCode=Y[t],n.hLineSentCount>0?n.lastHTime=(i-n.lastHLineSentTime)/1e3:n.lastHTime=(i-n.lastSLineSentTime)/1e3,"heartBeat"==t){var s=n.logInterval;n.logInterval=(i-n.lastPLineSentTime)/1e3,Ie(n,i)}n.logInterval<0&&(n.logInterval="0");var o=!1;if("complete"==t&&(t="playing",o=!0),n.endOfStream=o?"1":"0",n.currentClockTime=i-n.startTimer,n.currentStreamTime=parseInt(Qt(e)),"playing"!=t||n.playEndMetricsUpdated||(o&&Ie(n,i),ot("send Beacon, updating play and end metrics"),at(e,r,i,o),$t(e)),n.customDataPopulated||tt(n),it(n),!F){var l={element:st(n),code:o?"complete":t,synch:a};return j.push(l),"playing"!=t&&"playStart"!=t||n.clearRelativeMetrics(),void("heartBeat"!=t?(ot("send beacon :configurationPopulated false sequenceId = "+n.sequenceId),++n.sequenceId,n.lastLogTime=i):n.logInterval=s)}if("playStart"==t&&function(){try{var e="";for(var t in D)D[t]&&(t in R||(e?e+=", "+t:e=t));e&&(e="Following dimensons have not being set : "+e,e+="<ul style='list-style-type:circle;margin:0'>",ot(e+="<li>Please refer 'Set Custom Data' section in Integration guide for more details.</li></ul>","INTEGRATION"))}catch(e){}}(),n.populateMetricsFromConfiguration(),n.xViewerId=le.xViewerId,n.xViewerIdVersion=le.xViewerIdVersion,"undefined"!=typeof akaMediaAnalytics&&null!=akaMediaAnalytics){var d=akaMediaAnalytics.getStream();d&&(n.bandwidth=d.getBandwidthFromFragments(),ot("reporting bandwidth = "+n.bandwidth),d.cleanupFragments())}Ze(n,o?"complete":t,a),n.qualityOfExperience=null,o=!1,"playing"!=t&&"playStart"!=t||n.clearRelativeMetrics(),"heartBeat"!=t?(++n.sequenceId,n.lastLogTime=i):n.logInterval=s}catch(e){ot("Exception, send beacon:"+e)}}function st(e,t){t=t||{};try{for(var a in e)"object"==typeof e[a]&&e[a]?(t[a]=e[a].constructor===Array?[]:{},st(e[a],t[a])):t[a]=e[a];return t}catch(e){}}function ot(e,t){try{if(1==ce.configURLCsmaDebug||1==ce.pageURLCsmaDebug||1==ce.configDebug){try{ce.printException&&-1!=e.indexOf("Exception")&&(t="ERROR")}catch(e){}var a=[];a[0]={message:e,type:t,time:w()};var i={logMessage:a,type:"log"};try{void 0!==v?v.processLogs({api:"reportLogs",value:i}):p.push({api:"reportLogs",value:i})}catch(e){p.push({api:"reportLogs",value:i})}try{console.log(e)}catch(e){}}else if(!F){var n={message:e,msgType:t};de.push(n)}}catch(e){}}function lt(){try{if((1==ce.configURLCsmaDebug||1==ce.pageURLCsmaDebug||1==ce.configDebug)&&ce.logStoredMsg)if("function"==typeof AkamaiAnalytics_debugWindow_available&&"1"==AkamaiAnalytics_debugWindow_available()){if(ce.logTimer&&Ue(ce.logTimer),ce.logStoredMsg=!1,de.length){for(var e=0;e<de.length;e++)ot(de[e].message,de[e].msgType);de=[]}}else ce.logTimer=Oe(lt,1e3,[])}catch(e){}}ye(),Se((function(e){var t=e.readyState,a=e.status;ot("readConfig: readyState = "+t+":::status = "+a);try{if(4==t&&200==a){!function(){try{ot("deleteExpiredDataFromLocalStorage");for(var e=C(),t=window.localStorage.length-1;t>=0;t--){var a=window.localStorage.getItem(window.localStorage.key(t));if(null!=a&&-1!==a.indexOf("expiryDate")){var i=JSON.parse(a);null!=i&&void 0!==i.expiryDate&&null!==i.expiryDate&&Date.parse(i.expiryDate)<=e&&window.localStorage.removeItem(window.localStorage.key(t))}}}catch(e){}}();var i=e.responseXML;if(i){for(var n,r=(n=i.documentElement?i.documentElement:i).getElementsByTagName("dataMetrics"),s=0;s<r.length;++s){var o=r[s],l=o.parentNode,d=l.nodeName;z[s]=d;var c=W[d]=[],u=l.getAttribute("eventCode");u&&(Y[d]=u);for(var m=o.getElementsByTagName("data"),f=0;f<m.length;++f){var h=m[f];d=h.getAttribute("name");var p=h.getAttribute("key");u=h.getAttribute("value");var g=h.getAttribute("sendOnce"),v=h.getAttribute("fallback"),y=h.getAttribute("size"),S=h.getAttribute("regExpJS"),T=h.getAttribute("expiry"),b={};b.name=d,b.key=p,(d in D||-1!=p.indexOf("_cd_"))&&(D[d]=!0),u&&(b.value=u),g&&(b.isSent=!1,b.sendOnce=g),v&&(b.fallback=v),y&&(b.size=y),S&&(b.regExpJS=S),T&&(b.expiryDuration=parseInt(parseInt(T)/1440)),c.push(b)}}ce.configDebug=parseInt(n.getAttribute("debug")),1!=ce.configDebug&&(ce.configDebug=0),1==ce.configDebug&&ye(),n.getElementsByTagName("isActive")[0]&&n.getElementsByTagName("isActive")[0].childNodes[0]&&(se=n.getElementsByTagName("isActive")[0].childNodes[0].nodeValue),X.beaconId=n.getElementsByTagName("beaconId")[0].childNodes[0].nodeValue,X.beaconVersion=n.getElementsByTagName("beaconVersion")[0].childNodes[0].nodeValue;var k=n.getElementsByTagName("logTo")[0];G.logType=k.getAttribute("logType"),G.logType||(G.logType="relative"),G.logInterval=1e3*k.getAttribute("logInterval"),G.logInterval||(G.loginterval=3e5),G.heartBeatInterval=1e3*k.getAttribute("heartBeatInterval"),G.heartBeatInterval||(G.heartBeatInterval=6e4),G.secondaryLogTime=1e3*k.getAttribute("secondaryLogTime"),G.secondaryLogTime||(G.secondaryLogTime=15e3),G.rebufferDurationOutlier=1e3*k.getAttribute("rebufferDurationOutlier"),G.rebufferDurationOutlier||(G.rebufferDurationOutlier=6e5),G.isSessionWithRebufferLimit=k.getAttribute("isSessionWithRebufferLimit"),G.isSessionWithRebufferLimit||(G.isSessionWithRebufferLimit=500),G.fastTCPEnabled=k.getAttribute("fastTCPEnabled"),G.fastTCPEnabled||(G.fastTCPEnabled=0),1==G.fastTCPEnabled&&(ie.fastTCPEnabled=!0),G.aisRequestLimit=k.getAttribute("aisRequestLimit"),G.aisRequestLimit||(G.aisRequestLimit=3),me&&(me.aisRequestLimit=G.aisRequestLimit),G.aisRequestInterval=1e3*k.getAttribute("aisRequestInterval"),G.aisRequestInterval||(G.aisRequestInterval=3e4),me&&(me.aisRequestInterval=G.aisRequestInterval),G.startupTimeOutlierLimit=1e3*k.getAttribute("startupTimeOutlierLimit"),G.startupTimeOutlierLimit||(G.startupTimeOutlierLimit=6e5),G.visitTimeout=60*k.getAttribute("visitTimeout")*1e3,G.visitTimeout||(G.visitTimeout=36e5),G.urlParamSeparator=k.getAttribute("urlParamSeparator"),G.urlParamSeparator||(G.urlParamSeparator="~"),G.encodedParamSeparator=k.getAttribute("encodedParamSeparator"),G.encodedParamSeparator||(G.encodedParamSeparator="*@*"),G.initBrowserCloseTime=k.getAttribute("initBrowserCloseTime"),G.initBrowserCloseTime||(G.initBrowserCloseTime=9e5),G.seekThreshold=1e3*k.getAttribute("seekThreshold"),G.seekThreshold||(G.seekThreshold=2e3);var A=k.getAttribute("delayTimer");A&&(q.time=A),1==k.getAttribute("disableDelay")&&(q.enabled=!1);var L=k.getElementsByTagName("host")[0].childNodes;if(L.length>1){G.beaconUrl="";for(f=0;f<L.length;f++)G.beaconUrl+=L[f].nodeValue}else G.beaconUrl=k.getElementsByTagName("host")[0].childNodes[0].nodeValue;-1==G.beaconUrl.indexOf("http://")&&-1==G.beaconUrl.indexOf("https://")&&(G.beaconUrl="http://"+G.beaconUrl),G.beaconUrl+=k.getElementsByTagName("path")[0].childNodes[0].nodeValue,G.maxLogLineLength=k.getAttribute("maxLogLineLength"),G.maxLogLineLength||(G.maxLogLineLength=2048),G.maxLogLineLength-=G.beaconUrl.length,G.logVersion="2.0",G.formatVersion="1.1",k.getElementsByTagName("formatVersion")&&k.getElementsByTagName("formatVersion")[0]&&k.getElementsByTagName("formatVersion")[0].childNodes[0]&&(G.formatVersion=k.getElementsByTagName("formatVersion")[0].childNodes[0].nodeValue),G.useKey=parseInt(n.getElementsByTagName("statistics")[0].getAttribute("useKey"));var I=n.getElementsByTagName("feedback")[0];null!=I&&""!==I&&(re.shouldSendFLine=!0,re.limit=I.getAttribute("limit"),re.limit||(re.limit=3),re.socialShareLimit=I.getAttribute("socialShareLimit"),re.socialShareLimit||(re.socialShareLimit=1));var E=n.getElementsByTagName("security")[0];if(null!=E&&""!==E){var w=E.getElementsByTagName("ViewerDiagnostics")[0];if(null!=w&&""!==w){Q.viewerDiagnostics={};var P=w.getElementsByTagName("salt")[0];if(null!=P&&""!==P){Q.viewerDiagnostics.salt={};var x=P.getAttribute("value"),M=P.getAttribute("version");null!=x&&""!==x?(Q.viewerDiagnostics.salt.value=x,Q.viewerDiagnosticsEnabled=!0,null!=M&&""!==M&&(Q.viewerDiagnostics.salt.version=M),Q.viewerDiagnostics.salt.bytes=2*P.getAttribute("bytes"),Q.viewerDiagnostics.salt.bytes||(Q.viewerDiagnostics.salt.bytes=32),Q.viewerDiagnostics.salt.iterations=P.getAttribute("iterations"),Q.viewerDiagnostics.salt.iterations||(Q.viewerDiagnostics.salt.iterations=50)):Q.viewerDiagnosticsEnabled=!1}}}var B=n.getElementsByTagName("bucketInfo")[0];for(var O in J.bucketLength=B.getElementsByTagName("bucketLength")[0].childNodes[0].nodeValue,J.bucketCount=B.getElementsByTagName("bucketCount")[0].childNodes[0].nodeValue,F=!0,R)try{"_cd_"==O.substring(0,4)&&Te(O)}catch(e){}!function(){try{for(var e=W.split,t=0;t<e.length;t++)K[e[t].name]=e[t].key}catch(e){}}(),lt(),function(){try{var e=G.beaconUrl.toLowerCase(),t="";-1==e.indexOf(".edgesuite.net/")&&-1==e.indexOf(".edgekey.net/")&&(t="Beacons sent to incorrect domain : "+e,t+="<ul style='list-style-type:circle;margin:0'>",t+="<li>We have identified that the beacons are not sent to an Akamai Domain.</li>",ot(t+="<li>Kindly use the proper Beacon XML path that is provided in SOLA Anlaytics UI while provisioning.</li></ul>","ERROR"))}catch(e){}}();var U=n.getElementsByTagName("match");for(f=0;f<U.length;f++){match=U[f];try{parentKey=match.parentNode.parentNode.getAttribute("name"),$[parentKey]||($[parentKey]={}),$[parentKey][match.getAttribute("key")]={type:match.getAttribute("type"),name:match.getAttribute("name"),value:match.getAttribute("value")}}catch(e){ot(e)}}!function(){var e={};try{var t,a;if($.bitRateBucketTimes){for(a in $.bitRateBucketTimes)if(e=$.bitRateBucketTimes[a])if(e.key=a,e.value){t=e.value.split(";");for(var i=0;i<t.length;i++)-1!=t[i].indexOf("min:")?e.min=parseInt(t[i].split(":")[1]):-1!=t[i].indexOf("max:")&&(e.max=parseInt(t[i].split(":")[1]))}else e.category="first"}else $.bitRateBucketTimes={},(e=$.bitRateBucketTimes).U={key:"U",type:"range"},e.S={key:"S",max:1500,value:"max:1500",type:"range"},e.Q={key:"Q",min:1500,max:2500,value:"min:1500;max:2500",type:"range"},e.D={key:"D",min:2500,value:"min:2500",type:"range"};for(var n in he.bitRateBucketMap={},$.bitRateBucketTimes)he.bitRateBucketMap[n]=0}catch(e){ot("Exception, find bit rate match rules :"+e)}}(),function(){if(ot("fillVideoWithConfig function"),N&&N.akamai){var e=N.akamai;e.populateMetricsFromConfiguration(),e.isSLineSent&&He(N),Q.viewerDiagnosticsEnabled&&Me(e),e.cdn=be(e)}}(),function(){ot("sendStoredBeacons: number of beacons to be sent = "+j.length);try{for(N.akamai;j.length>0;){var e=j.shift();ot("readConfig: sending beacon event code = "+e.code),e.element.populateMetricsFromConfiguration(),e.element.xViewerId=le.xViewerId,e.element.xViewerIdVersion=le.xViewerIdVersion,e.element.cdn=be(e.element),Ze(e.element,e.code,e.synch)}}catch(e){ot("Exception,  sendStoredBeacons"+e)}}()}}}catch(e){ot("Exception,  readConfig :"+e)}}),V.url,!1,!0),this.getValueFromQueryString=function(){return De(key,searchURL)},this.logMessage=function(e,t){ot(e,t)};var dt="AkamaiAnalytics_BrowserSessionId",ct=null,ut=null,mt=null,ft=null,ht=null,pt=null,gt=null;navigator&&navigator.userAgent&&(gt=navigator.userAgent),function(){if(navigator&&navigator.userAgent){try{var e=navigator.userAgent,t=/\((\w+)/,a=t.exec(e);ut=a[1].toLowerCase(),ut=-1!=e.indexOf("Xbox")?"Xbox":-1!=ut.indexOf("compatible")||-1!=ut.indexOf("windows")||-1!=ut.indexOf("mobile")?"Windows":-1!=ut.indexOf("x11")?"Linux":-1!=ut.indexOf("macintosh")||-1!=ut.indexOf("mac os")||-1!=ut.indexOf("macos")?"Mac OS":-1!=ut.indexOf("ipad")?"iPad":-1!=ut.indexOf("iphone")?"iPhone":-1!=ut.indexOf("ipod")?"iOS":-1!=e.indexOf("Android")?"Android":-1!=e.indexOf("PlayStation 4")?"PlayStation 4":-1!=e.indexOf("PLAYSTATION 3")?"PlayStation 3":"Others"}catch(e){ot("Exception,  finding Osname"),ut="Others"}mt=ut;try{if((a=(t=/(NT|Phone|OS X|Linux|CPU.*?OS) ([0-9\._]+)/).exec(e))&&a.length>2){(ht=a[2]?a[2]:"")&&(mt+=" "+ht);var i=null;"Windows"==ut&&(i=function(e){var t=null;if(e)if("6.3"==e||"6.2"==e)t="8";else if("6.1"==e)t="7";else if("6.0"==e)t="Vista";else if("5.2"==e||"5.1"==e)t="XP";else{var a=e.split(".");t=parseInt(a[0])>=8?a[0]:"Other"}return t}(ht),ut=ut+" "+i)}}catch(e){ot("Exception,  OSVersion"+e)}}}(),function(){if(navigator&&navigator.userAgent){var e=navigator.userAgent,t=/(MSIE|Chrome|Version|Firefox)[ \/]([0-9]+)/;try{var a=t.exec(e);if(ct=a[1],"Version"==a[1]){var i=(t=/(Opera|Safari)/).exec(e);ct=i[1]}}catch(e){ot("Exception,  browserName"+e)}try{ot("browser version = "+a[2]);var n=e.indexOf("Edge");if(-1!=n){uagentLength=e.length;var r=e.substr(n,uagentLength-n).split("/");ct=r[0],ft=r[1]}else ft=a[2];ct&&ft&&(ct=ct+" "+ft)}catch(e){ot("Exception,  browserVersion"+e)}}}(),function(){if(navigator&&navigator.userAgent)try{var e=navigator.userAgent;e=e.toLowerCase(),pt=-1!=e.indexOf("ipad")?"iPad":-1!=e.indexOf("ipod")?"iPod":-1!=e.indexOf("iphone")?"iPhone":-1!=e.indexOf("android")?"Android Device":-1!=e.indexOf("xbox")?"Xbox":-1!=e.indexOf("macintosh")||-1!=e.indexOf("windows")||-1!=e.indexOf("compatible")?"Desktop":-1!=e.indexOf("playstation 4")?"PlayStation 4":-1!=e.indexOf("playstation 3")?"PlayStation 3":"Others"}catch(e){ot("Exception,  getitng device name : "+e),pt="Others"}}();var vt={ended:0,init:1,playing:2,pause:3,seek:4,rebuffering:5,resumeBuffering:6};function yt(e){try{switch(e){case vt.ended:return"ended";case vt.init:return"init";case vt.playing:return"playing";case vt.pause:return"pause";case vt.seek:return"seek";case vt.rebuffering:return"rebuffering";case vt.resumeBuffering:return"resumeBuffering";default:return"undefined"}}catch(e){}}var St,Tt=[0,0,0,0,0,0,0,0,0,0,0,0],bt=[0,0,0,0,0,0,0,0,0,0,0,0],kt="0,0,0,0,0,0,0,0";function At(e){if(e&&e.customMetrics)for(var a in e.customMetrics)a in B||(this[a]=e.customMetrics[a]);this.userAgent=gt,this.playerType="HTML5",null!=o&&null!=l?this.pluginVersion="JS-"+t+":"+o+"-"+l:N.objectBased?this.pluginVersion="JS-"+t:this.pluginVersion="HTML5-"+t,this.os=ut,this.fullOs=mt,this.osVersion=ht,this.browser=ct,this.browserVersion=ft,this.browserSize=window.innerWidth+"x"+window.innerHeight,this.rebufferCount=0,this.bytesLoadedCallback=0,this.lastBytesLoaded=0,this.currRebufferEndEpoch=0,this.totalPlayClockTime=0,this.totalPlayStreamTime=0,this.totalRebufferCount=0,this.totalRebufferTime=0,this.totalPauseCount=0,this.totalPauseDuration=0,this.totalSeekCount=0,this.totalSeekTime=0,this.totalResumeBufferCount=0,this.totalResumeBufferTime=0,this.totalAdPlayClockTime=0,this.totalAdStartCount=0,this.totalAdAbandonCount=0,this.updateTerminateMetrics=function(){try{this.playClockTime&&(this.totalPlayClockTime+=parseInt(this.playClockTime)),this.playStreamTime&&(this.totalPlayStreamTime+=parseInt(this.playStreamTime)),this.rebufferCount&&(this.totalRebufferCount+=parseInt(this.rebufferCount)),this.rebufferTime&&(this.totalRebufferTime+=parseInt(this.rebufferTime)),this.pauseCount&&(this.totalPauseCount+=parseInt(this.pauseCount)),this.pauseDuration&&(this.totalPauseDuration+=parseInt(this.pauseDuration)),this.seekCount&&(this.totalSeekCount+=parseInt(this.seekCount)),this.seekTime&&(this.totalSeekTime+=parseInt(this.seekTime)),this.resumeBufferCount&&(this.totalResumeBufferCount+=parseInt(this.resumeBufferCount)),this.resumeBufferTime&&(this.totalResumeBufferTime+=parseInt(this.resumeBufferTime)),this.adPlayClockTime&&(this.totalAdPlayClockTime+=parseInt(this.adPlayClockTime)),this.adCount&&(this.totalAdStartCount+=parseInt(this.adCount)),this.adAbandonCount&&(this.totalAdAbandonCount+=parseInt(this.adAbandonCount));var e=C();this.startupAbondonWaitTime=e,this.playInterval=e}catch(e){ot("Unable to update cumulative metrics")}},this.clearRelativeMetrics=function(){var e=["rebufferCount","rebufferTime","playClockTime","playStreamTime","seekCount","seekTime","pauseCount","pauseDuration","resumeBufferCount","resumeBufferTime","averagedBitRate","transitionUpSwitchCount","transitionDownSwitchCount","rebufferSession","curRebufferTime","adCount","adPlayClockTime","adStartupTime","adAbandonCount","adPauseTime"];this.updateTerminateMetrics();for(var t=0;t<e.length;++t)this[e[t]]=0;this.pauseIntervalsAsString="-",this.seekIntervalsAsString="-",this.pauseSeekSession="-",this.transitionStreamTimeSession="-",this.socialSharing=null,this.adSession=null,re.socialSharing=null,re.socialSharingObj={},he.bitRateArr=[],delete this.rebufferSession},this.populateMetricsFromConfiguration=function(){for(var e in this.beaconId=X.beaconId,this.beaconVersion=X.beaconVersion,this.logType="relative"==G.logType?"R":"C",this.logVersion=G.logVersion,this.startupTimeOutlierLimit=G.startupTimeOutlierLimit,this.formatVersion=G.formatVersion,this.bucketCount=J.bucketCount,this.bucketLength=J.bucketLength,W)if(W[e])for(var t=0;t<W[e].length;t++)W[e][t].value&&(this[W[e][t].name]=W[e][t].value)},this.initPlayed=function(e){this.played.push([e,e]),this.playingIndex=0},this.updatePlayClockTime=function(e,t,a){this.playClockTime+=e,he.updateBitRateArr(e)},this.updatePlayed=function(e,t){var a=this.played;if(a){for(var i=0;i<a.length;i++);for(i=this.playingIndex;i<a.length&&e>a[i][0];i++);if(i!=this.playingIndex?(a[this.playingIndex][1]=Math.max(e,a[i-1][1]),a.splice(this.playingIndex+1,i-this.playingIndex-1)):a[this.playingIndex][1]=Math.max(e,a[this.playingIndex][1]),null!=t){for(i=0;i<a.length;i++){if(a[i][0]<=t&&a[i][1]>=t)return void(this.playingIndex=i);if(i+1<a.length&&a[i][1]<t&&a[i+1][0]>t)return i++,this.playingIndex=i,void a.splice(i,0,[t,t])}i==a.length&&(a.push([t,t]),this.playingIndex=i)}}},this.isVisitEnd=0,this.sequenceId="0",this.isSLineSent=!1,this.sendVLine=!1,this.played=[],this.iLineCount=0,this.isPlaylist=!1,this.isFirstTitle=1,this.currentState={state:vt.ended,lastEventClockTime:0,pauseStartStreamTime:0,pauseStartClockTime:0,timeUpdateStreamTime:0,timeUpdateClockTime:0,pollingTimerStreamTime:0,seekStartStreamPos:0},this.seekObject={seekStartEpochTime:-1,seekEndEpochTime:-1,seekStartStreamTime:-1,seekEndStreamTime:-1},this.clearRelativeMetrics(),ot("value of configurationPopulated"+F),F&&this.populateMetricsFromConfiguration(),this.loadStartILine=!1,this.canPlayUpdated=!1,this.canPlayEventAutoPlay=!0,this.format="P",this.playerFormat=this.playerType+":"+this.format,this.deliveryType="O",this.firstTimeProgress=!0,this.firstTimePlay=!0,this.isILineSent=!1,this.seekFrom=0,this.lastPlayStreamTime=0,this.lastPlayLogTime=0,this.lastLogTime=0,this.curRebufferTime=0,this.sendIsSessionWithRebufferH=1}function Lt(){try{var e,t;for(e in W)if(W[e])for(t=0;t<W[e].length;t++)W[e][t].isSent&&!0===W[e][t].isSent&&(W[e][t].isSent=!1)}catch(e){}}function It(e){ot("endOfTheSession");var t=e.akamai,a=t.isPlaylist,i=t.visitId,n=t.viewerId,r=t.streamName,s=t.cdn,o=t.sendVLine,l=t.iLineCount;e.akamai=null,Lt(),(t=e.akamai=new At(e)).visitId=t.browserSessionId=i,t.viewerId=t.clientId=n,t.cdn=s,oe=-1,t.streamName=r,t.iLineCount=l,e.akamai.clearVisitTimeoutId=Oe(ra,G.visitTimeout,[e,1]),t.sendVLine=o,t.isPlaylist=a,e.played&&(e.played.length=0),he.clearBitRate()}N.akamai=new At(N);var Et=["UNKNOWN","MEDIA_ERR_ABORTED","MEDIA_ERR_NETWORK","MEDIA_ERR_DECODE","MEDIA_ERR_SRC_NOT_SUPPORTED"];function Ct(e){return!!(O&&O.dataset&&O.dataset.isad&&"true"==O.dataset.isad)}function wt(e,t,a,i){"playing"==t&&(ne=[]);var n={};if(n.eventType=t,n.eventTime=i,a&&(n.streamUrl=a),"error"==t&&(n.errorCode=Pe(e)),ne&&ne.length>0){var r=ne[ne.length-1];r.eventType==n.eventType&&r.streamUrl==n.streamUrl?("error"==t&&(r.errorCode=n.errorCode),r.eventTime=n.eventTime):ne.push(n)}else ne.push(n)}function Pt(e,t,a,i){try{var n=!1;if(ne.length>0){var r=ne[ne.length-1];if(ot("check error events array, previous event is : "+r.eventType),"error"==r.eventType&&a==r.streamUrl)if("error"==t){var s=Pe(e);n=r.errorCode==s,r.eventTime=i,r.errorCode=s}else"play"==t&&r.eventTime&&i-r.eventTime<=2e3&&(n=!0)}}catch(e){ot("Exception,  checkErrorEventsArray"+e),n=!1}return n}function Rt(e,t){if(Ct())ot("handlePauseEvent : video tag is of type AD, return");else try{ot("entered function handle Pause Event");var a=C(t),i=parseInt(Qt(e)),n=e.akamai,r=n.currentState,s=Jt(e);if(n.firstTimePlay||r.state==vt.pause)return;if(s&&0!=s&&i&&0!=i&&Math.abs(s-i)<1e3)return;var o=a-r.lastEventClockTime,l=a-n.startTimer;switch(r.state){case vt.playing:n.updatePlayClockTime(o,r.lastEventClockTime,a),++n.pauseCount,Ae(n,a,i,"P"),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",P("+i+":"+l+")":n.pauseSeekSession="P("+i+":"+l+")",n.updatePlayed(i);break;case vt.rebuffering:if(!n.chasingSleep){++n.pauseCount,Ae(n,a,i,"P"),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",P("+i+":"+l+")":n.pauseSeekSession="P("+i+":"+l+")",n.rebufferTime+=o,n.curRebufferTime+=o,n.rebufferSessionArrayHLine&&(ot("handlePauseEvent : pushing, rebufferSessionArrayHLine"),n.rebufferSessionArrayHLine.push(a));try{Le(n,a),n.curRebufferTime=0}catch(e){ot("Error...Pause"+e.message)}}}r.state=vt.pause,r.pauseStartStreamTime=i,r.pauseStartClockTime=a,r.lastEventClockTime=a}catch(e){ot("Exception,  handlePauseEvent : "+e)}}function xt(e,t){try{if(N&&N.akamai){ot("handle bit rate switch");try{e=parseInt(e)}catch(e){return void ot("Exception,bit rate to int :"+e)}isNaN(e)&&ot("handle bitrate swtich, bite rate isNaN");var a=N.akamai,i=a.currentState,n=Qt(N);"-"!=he.currentBitRate&&(e>he.currentBitRate?a.transitionUpSwitchCount++:e<he.currentBitRate&&a.transitionDownSwitchCount++),i&&i.state==vt.playing&&Bt(N,t),he.currentBitRate=e,he.currentStartPos=n}}catch(e){ot("Exception, handle bit rate switch:"+e)}}function Mt(e,t){if(Ct())ot("handle Play Event : video tag is of type AD, return");else try{var a=C(t),i=Yt(e);if(e.akamai&&e.akamai.postRollTimer&&(ot("handle play event: send the C line without changing set data"),Ue(e.akamai.postRollTimer),delete e.akamai.postRollTimer,Ut(e,a)),Pt(e,"play",i,a))return void ot("handle play Event: play is thrown after error, return, curTime = "+a);wt(e,"play",i,a);var n=e.akamai,r=parseInt(Qt(e)),o=n.currentState,l=a-o.lastEventClockTime,u=a-n.startTimer,m=o.state;switch(ot("entered function handle Play Event, current state = "+yt(o.state)),m){case vt.ended:E(i,n),n.streamUrl=i,n.startTimer=a,n.streamLength=parseInt(Jt(e)),null!=i&&-1!=i.indexOf("?")&&(i=i.substring(0,i.indexOf("?"))),null!=i&&""!=i&&/.m3u8$/.exec(i)&&(n.format="L",n.playerFormat=n.playerType+":"+n.format,n.deliveryType="L"),oe=-1,function(e,t,a){try{ot("send beacon I line");var i=e.akamai;i.cdn=be(i),s&&we(e,!0),i.iLineSentTime||(i.iLineSentTime=a),e.videoWidth&&e.videoHeight&&(i.videoSize=e.videoWidth+"x"+e.videoHeight),i.isILineSent||(_e(e),rt(e,"init",t,a),Fe(e,a),i.clearVisitTimeoutId&&Ue(i.clearVisitTimeoutId))}catch(e){ot("Exception send I line:"+e)}}(e,!1,a),n.currentState.state=vt.init,ot(a+": handlePlayBackEvent : Setting state to init"),n.currentState.timeUpdateClockTime=a,n.currentState.timeUpdateStreamTime=0,n.currentState.lastEventClockTime=a,n.isPlaylist=!0;var f=Yt(e),h=StreamTypeDetector(f,c,d,(function(e){e&&(ot("detected stream type = "+e.getStreamType()),ot("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType()),n.streamUrl=e.getStreamURL(),n.format=e.getStreamFormat(),n.deliveryType=e.getDeliveryType(),e.getStreamLength()&&(n.streamLength=e.getStreamLength()),n.streamName=e.getStreamName())}));h!==streamError.NoError&&ot("failed to detect stream. May be we do not have sufficient information");break;case vt.pause:n.pauseDuration+=l,"-"!=n.pauseIntervalsAsString?n.pauseIntervalsAsString+=","+o.pauseStartStreamTime+":"+(a-o.pauseStartClockTime):n.pauseIntervalsAsString=o.pauseStartStreamTime+":"+(a-o.pauseStartClockTime),"-"!=n.pauseSeekSession?n.pauseSeekSession+=",R("+o.pauseStartStreamTime+":"+u+")":n.pauseSeekSession="R("+o.pauseStartStreamTime+":"+u+")",n.updatePlayed(o.pauseStartStreamTime,r),n.currentState.lastEventClockTime=a,++n.resumeBufferCount,o.state=vt.resumeBuffering;break;case vt.init:n.iLineSentTime||(n.iLineSentTime=a),!n.loadStartILine||n.canPlayEventAutoPlay||n.canPlayUpdated||(n.iLineSentTime=a,n.canPlayUpdated=!0)}}catch(e){ot("Exception,  handle Play Event:"+e)}}function Bt(e,t){if(Ct())ot("handle Playing Event : video tag is of type AD, return");else try{var a=C(t);wt(e,"playing",Yt(N),a);var i=parseInt(Qt(e)),n=e.akamai,r=n.currentState,s=a-r.lastEventClockTime,o=(n.startTimer,r.state);switch(ot("entered function handle Playing Event, current State = "+yt(r.state)),o){case vt.rebuffering:if(!n.wasPutToSleep){n.rebufferTime+=s,n.curRebufferTime+=s,n.continuousRebufferDuration=0,n.rebufferSessionArrayHLine&&n.rebufferSessionArrayHLine.push(a);try{Le(n,a),n.curRebufferTime=0}catch(e){ot("Error...Play"+e.message)}}break;case vt.pause:case vt.resumeBuffering:n.resumeBufferTime+=s,0==s&&n.resumeBufferCount>0&&--n.resumeBufferCount;break;case vt.init:!function(e,t,a,i){try{ot("start of the session function");var n=e.akamai;if(!n||!n.firstTimePlay)return;n.adLoadTime&&n.adLoadTime>n.iLineSentTime?(n.startupTime=n.adLoadTime-n.iLineSentTime,n.adEndTime&&(n.startupTime+=a-n.adEndTime)):n.startupTime=a-n.iLineSentTime,n.startupTime>G.startupTimeOutlierLimit&&(n.outlierStartupTime=n.startupTime,n.startupTime=0),n.bufferingTime=n.startupTime,n.startupTime,$t(e);var r=Yt(e);E(r,n),n.streamUrl=r,null!=r&&""!=r&&(/.m3u8$/.exec(r)?(n.format="L",n.playerFormat=n.playerType+":"+n.format):(n.format="P",n.playerFormat=n.playerType+":"+n.format,n.deliveryType="O"),ot("Creating hls stream"),n.stream=new hlsStream);var s=StreamTypeDetector(r,c,d,(function(e){e&&(ot("detected stream type = "+e.getStreamType()),ot("Received steam type = "+e.getStreamType()+"\n Stream URL = "+e.getStreamURL()+"\n Stream Name = "+e.getStreamName()+"\n Stream Length = "+e.getStreamLength()+"\n Stream Format = "+e.getStreamFormat()+"\n Stream Delivery Type = "+e.getDeliveryType()),n.streamUrl=e.getStreamURL(),n.format=e.getStreamFormat(),n.deliveryType=e.getDeliveryType(),e.getStreamLength()&&(n.streamLength=e.getStreamLength()),n.streamName=e.getStreamName())}));s!==streamError.NoError&&ot("failed to detect stream. May be we do not have sufficient information"),n.streamLength=parseInt(Jt(e)),n.played=[];var o=parseInt(da("HTML_isPlayingCount"));ua("HTML_isPlayingCount",o+=1),xe(),Q.viewerDiagnosticsEnabled&&Me(n,!0),n.lastSLineSentTime=a,rt(e,"playStart",!1,a),n.rebufferSessionArrayHLine=[],n.isSLineSent=!0,F&&He(e),Tt[1]=1,n.isFirstTitle=null,n.isVisitStart=null,n.firstTimePlay=!1,n.initPlayed(i)}catch(e){ot("Exception, send S line:"+e)}}(e,0,a,i),he.currentStartPos=i;break;case vt.ended:ot("handle Playing Event : dispatch play and playing event"),Mt(e,a),Bt(e,a);break;case vt.playing:n.updatePlayClockTime(s,r.lastEventClockTime,a);break;case vt.seek:a-r.timeUpdateClockTime>0&&(Ae(n,a,i,"S"),n.updatePlayed(r.seekStartStreamPos,i))}r.state=vt.playing,r.lastEventClockTime=a}catch(e){ot("Exception,  handle Playing Event:"+e)}}function Dt(e,t){if(Ct())ot("handleWaitingEvent : video tag is of type AD, return");else try{var a=e.akamai;if(a.currentState.state==vt.rebuffering)return void ot("already inside handleWaiting Event");var i=C(t),n=parseInt(Qt(e)),r=a.currentState,s=i-r.lastEventClockTime,o=(a.startTimer,r.state);switch(ot("entered function handle Waiting Event, current state = "+yt(r.state)),o){case vt.playing:a.updatePlayClockTime(s,r.lastEventClockTime,i),++a.rebufferCount,1==a.rebufferCount&&"B"!=a.playerState&&(a.firstRebufferStartEpoch=Math.round(i)),a.rebufferSessionArrayHLine&&(ot("handleWaitingEvent : pushing, rebufferSessionArrayHLine"+i),a.rebufferSessionArrayHLine.push(i)),a.updatePlayed(n),r.state=vt.rebuffering;break;case vt.pause:++a.resumeBufferCount,r.state=vt.resumeBuffering;case vt.init:}r.lastEventClockTime=i,ot("handle waiting event, if seek starts, stream pos = "+n),r.seekStartStreamPos=n}catch(e){ot("Exception,  handleWaitingEvent:"+e)}}function Nt(e){if(Ct())ot("handle Error Event : video tag is of type AD, return");else try{var t=C(),a=Yt(e),i=Pe(e);if(Pt(e,"error",a,t))return void ot("handle Error Event: consecutive error events thrown, return, curTime = "+t);e&&e.akamai&&!e.akamai.isILineSent&&(ot("handle Error Event: calling handle Play Event"),Mt(e,t)),wt(e,"error",a,t);parseInt(Qt(e));var n=e.akamai,r=n.currentState,s=t-r.lastEventClockTime;n.startTimer,r.state;if(ot("entered function handle Error Event, current state = "+yt(r.state)),r.state==vt.playing&&n.updatePlayClockTime(s,r.lastEventClockTime,t),n.isELineSent||n.isCLineSent)return;ze(e,i,t),r.state=vt.ended;parseInt(da("HTML_LastCLineTime"));It(e),r.lastEventClockTime=t}catch(e){ot("Exception,  handleErrorEvent:"+e)}}function Ot(e,t){if(Ct())ot("handle Ended Event WithDelay : video tag is of type AD, return");else try{var a=e.akamai,i=a.currentState;ot("entered function handle Ended Event WithDelay, current state"+yt(i.state));var n=C(t),r=(Re(e),n-i.lastEventClockTime);if(a.pollingTimer&&Ue(a.pollingTimer),me&&me.retryTimer&&Ue(me.retryTimer),a.hLineTimer&&Ue(a.hLineTimer),a.fastTCPServerIpTimer&&Ue(a.fastTCPServerIpTimer),a.firstPLineTimer&&Ue(a.firstPLineTimer),me&&me.retryTimer&&Ue(me.retryTimer),a.postRollTimer)return void ot("handle Ended Event WithDelay: postRollTimer already started return");nt(a,"complete"),it(a),tt(a),a.postRollTimer=Oe(Ut,1e3,[e]),et(a),a.customDataPopulated=!0,Ie(a,n),at(e,r,n,!0),a.playEndMetricsUpdated=!0}catch(t){ot("Exception,  handle Ended Event WithDelay"+t),Ut(e,n)}}function Ut(e,t){try{var a=e.akamai;if(a.postRollTimer&&(Ue(a.postRollTimer),delete a.postRollTimer),a.isELineSent||a.isCLineSent)return void ot("handle Ended Event : already sent C line, return");var i=C(t),n=(parseInt(Qt(e)),a.currentState),r=i-n.lastEventClockTime;a.startTimer,n.state;ot("entered function handle Ended Event, current state"+yt(n.state)),a.playEndMetricsUpdated||(at(e,r,i,!0),a.playEndMetricsUpdated=!0),n.state=vt.ended;var s=Re(e);null!=a.streamTitleSwitchReason&&""!=a.streamTitleSwitchReason&&(s=a.streamTitleSwitchReason),We(e,s,!1,i);parseInt(da("HTML_LastCLineTime"));It(e),n.lastEventClockTime=i}catch(e){ot("Exception,  handle Ended Event :"+e)}}function Ht(){var e=navigator.connection||navigator.mozConnection||navigator.webkitConnection;e&&e.type&&(N.akamai.connectivity=e.type)}function Vt(e){e&&e.coords&&(N.akamai.latitude=e.coords.latitude,N.akamai.longitude=e.coords.longitude)}function _t(e){var t="";switch(e.code){case e.PERMISSION_DENIED:t="User denied the request for Geolocation.";break;case e.POSITION_UNAVAILABLE:t="Location information is unavailable.";break;case e.TIMEOUT:t="The request to get user location timed out.";break;case e.UNKNOWN_ERROR:t="An unknown error occurred."}ot("Location Error : ",t)}function Ft(e,t){try{if(N&&N.akamai&&N.akamai.isSLineSent?ot("setData() API called after 'Start Of Play' for dimension -> "+e+"|All custom dimensions should be set before the play is initiated.","WARN"):ot("setData("+e+":"+t+")","API"),"customDataObject"==e)jt(t);else if("customDataFunction"==e)M=t;else{try{null!=t&&(t=t.trim())}catch(e){}"viewerId"!=e&&"viewerDiagnosticsId"!=e||null!=t&&""!=t||(t="-");try{F&&"_cd_"==e.substring(0,4)&&Te(e)}catch(e){}try{-1!=e.indexOf("std:")?x[e.substring(4)]=t:R[e]=t}catch(a){R[e]=t}-1==e.indexOf("socialShare:")&&-1==e.indexOf("feedback:")||qt()}}catch(e){ot("Exception, Set Data :"+e)}}function jt(e){try{if("object"==typeof e)for(var t in e)Ft(t,e[t])}catch(e){ot("Exception set custom data object"+e)}}function qt(){try{var e="feedback:",t=!1,a=C();for(var i in R)if(-1!=i.indexOf(e)){var n=i.substring(9);R[n]=R[i],delete R[i],t=!0}!function(){try{var e="socialShare:",t=12,a=re.socialSharingObj;for(var i in R)-1!=i.indexOf(e)&&(i in re.dataSent?re.dataSent[i].count<re.socialShareLimit&&(++re.dataSent[i].count,null==a?a[i.substring(t)]=R[i]:i.substring(t)in a?a[i.substring(t)]=parseInt(a[i.substring(t)])+parseInt(R[i]):a[i.substring(t)]=R[i]):(re.dataSent[i]={},re.dataSent[i].value=R[i],re.dataSent[i].count=1,a[i.substring(t)]=R[i]),delete R[i]);re.socialSharingObj=a}catch(e){ot("Exception,  getFeedbackObj"+e),re.socialSharing=null}}(),ot("handleFeedbackEvent"),re&&re.shouldSendFLine&&re.akamai&&(re.akamai.isCLineSent||re.akamai.postRollTimer)&&(t&&(re.akamai.customDataChanged=!0),re.fLineCount<re.limit&&rt(re,"feedback",!1,a),++re.fLineCount,re.akamai.customDataChanged=!1,re.akamai.socialSharing=null)}catch(e){ot("Exception, handle feed back event :"+e)}}function Wt(e){if(!Ct())try{if(U)return void ot("handle time update event, return as inside background state for idevice");var t=C(null),a=parseInt(Qt(e)),i=e.akamai;if(!i)return;if(i.postRollTimer)return;var n=i.currentState,r=(n.lastEventClockTime,i.startTimer,n.state,a-n.timeUpdateStreamTime);0!=n.timeUpdateStreamTime&&(Math.abs(r)>=G.seekThreshold&&i.isSLineSent?(ot("stream diff in time update is "+r),function(e,t,a){if(Ct())ot("handle Seeked Event : video tag is of type AD, return");else try{t||(t=C()),a||(a=parseInt(Qt(e)));var i=e.akamai,n=i.currentState,r=t-n.lastEventClockTime,s=(i.startTimer,n.state);if(ot("entered function handle Seeked Event, currentstate = "+yt(n.state)),s==vt.pause||s==vt.playing||s==vt.rebuffering||n.state==vt.seek)switch(t-n.timeUpdateClockTime>0&&Ae(i,t,a,"S"),s){case vt.playing:i.updatePlayed(n.timeUpdateStreamTime,a),n.lastEventClockTime=t,i.updatePlayClockTime(r,n.lastEventClockTime,t),n.state=vt.seek,n.seekStartStreamPos=a;break;case vt.rebuffering:if(i.wasPutToSleep)ot("Rejecting this event, because rebuffer was caused by system sleep");else{ot("handle seeked event, previous state is rebuffering"),i.rebufferTime+=r,i.curRebufferTime+=r,i.rebufferSessionArrayHLine&&i.rebufferSessionArrayHLine.push(t);try{Le(i,t),i.curRebufferTime=0}catch(e){ot("Error...Play"+e.message)}n.lastEventClockTime=t,n.state=vt.seek}}}catch(e){ot("Exception,  handle Seeked Event :"+e)}}(e,t,a)):r>0&&r<=750&&(e.objectBased?n.state==vt.seek&&Bt(e):i.isSLineSent&&n.state!=vt.seek&&n.state!=vt.rebuffering||(ot("handle time update event,  dispatching playing event,  current Video state is : "+yt(n.state)),Bt(e)))),n.timeUpdateClockTime=t,n.timeUpdateStreamTime=a}catch(e){ot("Exception,  handleTimeupddate :"+e)}}function zt(e,t){try{var a=document.createElement("script");a.setAttribute("src",e),a.id=t,document.getElementsByTagName("head")[0].appendChild(a)}catch(t){ot("Exception,  loading JavaScript File "+e)}}function Xt(e){try{var t=document.getElementById(e);t.parentNode.removeChild(t)}catch(t){ot("Exception,  removing script with id "+e)}}function Kt(e){var t;(t=e.akamai).pollingTimer=Oe(Kt,Z,[e]);var a=Date.now();t.chasingSleep>0&&a>t.chasingSleep+5e3&&(!function(e){Lt(),he.clearBitRate(),akamai=e.akamai,!e.objectBased&&akamai.pollingTimer&&Ue(akamai.pollingTimer);me&&me.retryTimer&&Ue(me.retryTimer);akamai.hLineTimer&&Ue(akamai.hLineTimer);akamai.fastTCPServerIpTimer&&Ue(akamai.fastTCPServerIpTimer);akamai.firstPLineTimer&&Ue(akamai.firstPLineTimer);me&&me.retryTimer&&Ue(me.retryTimer);akamai.postRollTimer&&(Ue(akamai.postRollTimer),delete akamai.postRollTimer);akamai.currentState.state=vt.ended,akamai.isILineSent=!1,akamai.isSLineSent=!1,akamai.firstTimePlay=!0,akamai.iLineSentTime=0,akamai.lastPlayStreamTime=0}(e),t.wasPutToSleep=!0),t.chasingSleep=a,e&&(e.isBrightcoveVideo?akamaiBCVideoModule.getVideoPosition(!1,Gt):Gt(0,e))}function Gt(e,t){var a,i;C(null);if(null!=N&&N.isBrightcoveVideo?(N.currentTime=parseInt(e),i=parseInt(1e3*e),t=N):i=parseInt(Qt(t)),"undefined"!=i&&!isNaN(i)&&""!=i){var n=(a=t.akamai).currentState;if(n.state!=vt.ended)if(t.objectBased&&!0===a.wasPutToSleep&&i===n.pollingTimerStreamTime)a.pollingTimer&&Ue(a.pollingTimer),Mt(N),Bt(N);else if(t.objectBased)Wt(t);else{if(n.state==vt.pause||n.state==vt.seek)return;0!=i&&i===n.pollingTimerStreamTime&&n.state!=vt.rebuffering?(ot("check stream head position, call handle waiting event"),Dt(t)):n.pollingTimerStreamTime=i}}}function Qt(t){var a=0;try{t.objectBased?e&&e.streamHeadPosition&&(a=e.streamHeadPosition(),t.currentTime=a):O.currentTime&&(a=O.currentTime,t.currentTime=a)}catch(e){}return 0==a&&-1!=oe&&(a=oe),0!=a&&(oe=a),1e3*a}function Jt(t){var a=0;try{t&&(t.objectBased?e&&e.streamLength&&(a=e.streamLength(),t.duration=a):(a=O.duration,t.duration=a))}catch(e){}return 1e3*a}function Yt(t){var a="";try{t&&(t.objectBased?e&&e.streamURL&&(a=e.streamURL(),t.currentSrc=a):R.streamURL?a=R.streamURL:-1===(a=O.currentSrc).indexOf("blob:")?t.currentSrc=a:(a="",ot("Call akamaiSetStreamURL() to set streamUrl","Error")))}catch(e){}return a}function $t(e){try{null!=M&&jt(M())}catch(e){}}function Zt(e,t){try{ot("handle Ad loaded"),fe.isAdLoaded&&ot("handleAdLoaded API is called multiple times.|We have identified that 2 successive handleAdLoaded APIs are called.|Kindly ensure that sequence of Ad calls -- handleAdLoaded->handleAdStarted->handleAdComplete is maintained.","WARN");var a=N.akamai;if(!a.isILineSent)(new Date).getTime();var i=C(t);fe.clearAdAnalytics(),fe.isAdLoaded=!0,fe.adLoadTime=i,fe.adCount=1,fe.adAbandoned=!0,a.postRollTimer?(Ve(N),Ue(a.postRollTimer),a.postRollAd=!0,a.customDataPopulated=!1,fe.type=2):a.isILineSent&&(a.isSLineSent?(Rt(N,i),fe.type=1):a.isSLineSent||a.adLoadTime||(a.adLoadTime=i)),ea(e),a.isILineSent||function(e,t){try{var a=N.akamai;if(a.clearVisitTimeoutId&&Ue(a.clearVisitTimeoutId),_e(N),a.logInterval="0",F)Ze(a,"init",e);else{var i={element:st(a),code:"init",synch:e};j.push(i)}a.lastLogTime=t,++a.sequenceId,Fe(N,t),a.currentState.state=vt.init,ot(": sendBeaconILineAd : Setting state to init"),a.currentState.timeUpdateClockTime=t,a.startTimer=t}catch(e){ot("Exception, send I line AD:"+e)}}(!1,i)}catch(e){ot("Exception,handle ad loaded:"+e)}}function ea(e){try{var t=fe.setDataArr;ot("populate ad metric");for(var a=0;a<t.length;a++)t[a]in e&&(fe[t[a]]=e[t[a]])}catch(e){}}function ta(e,t){try{var a=C(t),i=N.akamai;fe.endStatus=e,"0"!=e&&(fe.adAbandonCount=1),fe.isAdLoaded&&fe.isAdStarted&&(fe.adPlayClockTime=a-fe.adStartTime),fe.adSession=function(){var e="",t=["adId","type","startPos","adStartupTime","adPlayClockTime","playBucket","endStatus","adDuration","adTitle","adCategory","adPartnerId","adServer","adDaypart","adIndustryCategory","adEvent"];try{for(var a=0;a<t.length;a++)0==fe[t[a]]||null!=fe[t[a]]&&""!=fe[t[a]]?e+=fe[t[a]]+":":e+=":";e=e.substring(0,e.length-1)}catch(e){}return e}();for(var n=["adStartupTime","adCount","adPlayClockTime","adAbandonCount"],r=0;r<n.length;r++)i[n[r]]+=fe[n[r]];i.adSession?i.adSession+=","+fe.adSession:i.adSession=fe.adSession,fe.isAdStarted=!1,fe.isAdLoaded=!1,"2"!=e&&(fe.adAbandoned=!1,i&&(i.postRollAd?(i.postRollAd=null,Ut(N,a)):i.isSLineSent?(Mt(N,a),Bt(N,a)):i.isSLineSent||(i.adEndTime=a)))}catch(e){ot("Exception,populate ad end:"+e)}}function aa(e){ot("subscribeToEvents : video = "+e);O=e;try{e.addEventListener("play",_.play=function(){Mt(N)},!1),e.addEventListener("pause",_.pause=function(){Rt(N)},!1),e.addEventListener("error",_.error=function(){Nt(N)},!1),e.addEventListener("ended",_.ended=function(){Ot(N)},!1),e.addEventListener("playing",_.playing=function(){Bt(N)},!1),e.addEventListener("waiting",_.waiting=function(){Dt(N)},!1),e.addEventListener("timeupdate",_.timeupdate=function(){Wt(N)},!1),e.addEventListener("load",_.load=function(){!function(e){try{if(Ct())return;e.akamai.firstTimeProgress}catch(e){}}(N)},!1),e.addEventListener("progress",_.progress=function(){!function(e){try{if(Ct())return;var a=e.akamai;a.firstTimeProgress&&(a.firstTimeProgress=!1,akaMediaAnalytics.getShouldAnalyze()&&setTimeout((function(e){e.setDiagnoserWindowLoaded(!0),e.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var a="";a+=!0===N.objectBased?"JS-":"HTML5-",a+=t,e.processLogs({api:"setCurrentVersion",value:a}),e.processLogs({api:"setCustomDimension",value:x}),e.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}),e.processLogs({api:"reportSetupParams",value:G.beaconUrl.toLowerCase()}),e.processLogs({api:"reportSetupParams",value:n})}),3e3,akaMediaAnalytics)),a.logType}catch(e){}}(N)},!1),e.addEventListener("durationchange",_.durationchange=function(){!function(e){try{if(Ct())return;e.akamai.streamLength=parseInt(Jt(e))}catch(e){}}(N)},!1),e.addEventListener("canplay",_.canplay=function(){!function(e){try{if(Ct())return;var t=e.akamai;O.autoplay?t.canPlayEventAutoPlay=!0:t.canPlayEventAutoPlay=!1}catch(e){}}(N)},!1),e.addEventListener("loadstart",_.loadstart=function(){!function(e){try{if(Ct())return;var t=e.akamai;O.autoplay&&(Mt(e),t.loadStartILine=!0)}catch(e){}}(N)},!1),ot("subscribed to events completed")}catch(e){ot("Exception,  subscribeToEvents,unable to add listeners to video tag :"+e)}}function ia(e){try{if("undefined"!=typeof akamaiBCVideoObject)O=akamaiBCVideoObject,N.isBrightcoveVideo=!0,initBrightcove();else if(N.objectBased||N.videoPassed);else if(document){var t=document.getElementsByTagName("video");ot("add MediaEvent Listeners : videos.length "+t.length),t&&0==t.length&&(t=document.getElementsByTagName("audio"));for(var a=0;a<t.length;++a)aa(t[a]);document.addEventListener("DOMNodeInserted",na,!1),document.addEventListener("DOMNodeRemoved",na,!1),document.addEventListener("DOMAttrModified",na,!1)}e&&("DOMContentLoaded"==e.type||"load"==e.type&&t&&t.length>0)&&document.removeEventListener("load",ia,!0)}catch(e){ot("Exception,  add MediaEvent Listeners :"+e)}}function na(e){var t=e.target;if(t.nodeType!=t.COMMENT_NODE&&null!=t.tagName&&("video"==t.tagName.toLowerCase()||"audio"==t.tagName.toLowerCase()))switch(e.type){case"DOMNodeRemoved":t.dataset&&t.dataset.isad&&"true"==t.dataset.isad||ra(N,0);break;case"DOMNodeInserted":aa(t)}}function ra(e,t){ot("handle Video Unload");var a=C(),i=e.akamai,n=parseInt(da("HTML_VisitCountCookie"));q.browserClose=!0;try{if(i&&i.currentState.state>=vt.init&&0==t){if(i.isELineSent||i.isCLineSent)return;if(fe&&fe.adAbandoned){var r="Ad.Abandon";i.postRollTimer&&(Ue(i.postRollTimer),delete i.postRollTimer),We(e,r,!0,a)}else if(i.firstTimePlay){var s="Browser.Refresh.NoStart";a-i.startTimer>G.initBrowserCloseTime&&(s="Browser.Refresh.NoStart.Late"),ze(e,s,!0,a)}else{r="Browser.Close";i.postRollTimer&&(Ue(i.postRollTimer),delete i.postRollTimer),We(e,r,!0,a)}}}catch(e){}try{var o=parseInt(da("HTML_LastCLineTime"))+G.visitTimeout-a,l=parseInt(da("HTML_isPlayingCount"));if(ot("handle Video Unload: playing cookie =  "+l+", visit cookie :"+n),n>=1&&1==t){if(o>0)return Ue(i.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=Oe(ra,o,[e,1]));if(o<=0&&n>1&&l>0)return Ue(i.clearVisitTimeoutId),void(e.akamai.clearVisitTimeoutId=Oe(ra,G.visitTimeout,[e,1]))}ot("handle Video Unload: decrementing HTML_VisitCountCookie"),ua("HTML_VisitCountCookie",n-=1),(0===(n=parseInt(da("HTML_VisitCountCookie")))||isNaN(n))&&i.sendVLine&&Xe(e,a)}catch(e){}}function sa(){try{fe.isAdLoaded&&ta("2")}catch(e){}ra(N,0)}function oa(e){ot("handlePagehide"),U=!0,sa()}function la(e){ot("handlePageshow:");try{N&&N.tagName&&(ot("handlePageShow: media tag is :"+N.tagName),N.akamai&&U&&(ot("handlePageshow: send play and playing on timeupdate"),!0))}catch(e){ot("Exception,  handlePagehsow : "+e)}U=!1}function da(e){var t=e+"=",a="";try{document.cookie.length>0&&(offset=document.cookie.indexOf(t),-1!=offset&&(offset+=t.length,end=document.cookie.indexOf(";",offset),-1==end&&(end=document.cookie.length),a=document.cookie.substring(offset,end)))}catch(e){}return a}function ca(e){try{var t=location.pathname.split("/"),a=" path=";document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;";for(var i=0;i<t.length;i++)a+=("/"!=a.substr(-1)?"/":"")+t[i],document.cookie=e+"=; expires=Thu, 01-Jan-1970 00:00:01 GMT;"+a+";"}catch(e){}}function ua(e,t,a){try{var i=e+"="+t+";Path=/;";if(a&&parseInt(a)>0){var n=new Date;n.setDate(n.getDate()+parseInt(a)),null!=n&&(i+="expires="+n.toUTCString()+";")}document&&(document.cookie=i)}catch(e){}}function ma(e,t){try{if(null!=e&&null!=t){var a=e[function(e){dimension="","viewerInterval"===e?dimension="viewerId":"viewerTitleInterval"===e&&(dimension="title");return dimension}(t.name)],i=I.SHA1(a).toString(),n=function(e){try{var t=window.localStorage.getItem(e);if(null!=t)return JSON.parse(t).value}catch(e){}}(i),r=0,s=C();n&&(r=(r=(r=s-parseFloat(n))/1e3/60)>0?r.toFixed(2):0),function(e,t,a){try{var i={value:t};if(null!=a){var n=new Date;parseInt(a)>0?n.setDate(n.getDate()+parseInt(a)):n.setDate(n.getDate()+parseInt(90)),i.expiryDate=n.toDateString()}window.localStorage.setItem(e,JSON.stringify(i))}catch(e){}}(i,s,t.expiryDuration),e[t.name]=r.toString()}}catch(e){ot("Exception,  calculateUniqueDimension :"+e)}}this.getViewerId=function(){try{var e=N.akamai;return e&&e.viewerId?e.viewerId:null}catch(e){return null}},this.setData=function(e,t){if(Ft(e,t),u&&N.objectBased){var a={methodName:"setData"};a[e]=t,this.processLogs({api:"reportAPI",value:a})}},this.handleStreamSwitch=function(){if(function(e){var t=N.akamai;t.streamTitleSwitchReason="Stream.Switched",Ut(N,e)}(),u&&N.objectBased){ot("handleStreamSwitch()","API");this.processLogs({api:"reportAPI",value:{methodName:"handleStreamSwitch"}})}},this.handleTitleSwitch=function(e){if(function(e,t){N.akamai.streamTitleSwitchReason="Title.Switched";var a=N.akamai.isFirstTitle;Ut(N,t);try{if(null!=e&&""!=e)for(var i in e)Ft(i,e[i])}catch(e){ot("Exception, handle title switch:"+e)}N.akamai.isFirstTitle=a,Mt(N,t),Bt(N,t);try{N.akamai.currentState.timeUpdateStreamTime=parseInt(Qt(N))}catch(e){ot("Exception,  handleTitleSwitch"+e)}}(e),u&&N.objectBased){ot("handleTitleSwitch()","API");var t={methodName:"handleTitleSwitch",customData:e};this.processLogs({api:"reportAPI",value:t},m)}},this.handleFeedbackEvent=function(){qt()},this.handleApplicationExit=function(){if(function(){try{N.objectBased||(ot("application exit, unsubscribe video events"),function(e){try{e.removeEventListener("play",_.play,!1),e.removeEventListener("pause",_.pause,!1),e.removeEventListener("error",_.error,!1),e.removeEventListener("ended",_.ended,!1),e.removeEventListener("playing",_.playing,!1),e.removeEventListener("waiting",_.waiting,!1),e.removeEventListener("timeupdate",_.timeupdate,!1),e.removeEventListener("load",_.load,!1),e.removeEventListener("progress",_.progress,!1),e.removeEventListener("durationchange",_.durationchange,!1),e.removeEventListener("canplay",_.canplay,!1),e.removeEventListener("loadstart",_.loadstart,!1)}catch(e){ot("Exception, unSubscribeFrom Events:"+e)}}(N))}catch(e){}sa()}(),u&&N.objectBased){ot("handleApplicationExit()","API");this.processLogs({api:"reportAPI",value:{methodName:"handleApplicationExit"}})}},this.enableServerIpLookUp=function(){if(s=!0,u&&N.objectBased){ot("enableServerIpLookUp()","API");this.processLogs({api:"reportAPI",value:{methodName:"enableServerIpLookUp"}})}},this.disableServerIpLookUp=function(){if(s=!1,u&&N.objectBased){ot("disableServerIpLookUp()","API");this.processLogs({api:"reportAPI",value:{methodName:"disableServerIpLookUp"}},m)}},this.enableLocation=function(e){if(function(e){if(e){if(navigator.geolocation&&null==r){r=navigator.geolocation.watchPosition(Vt,_t);var t=navigator.connection||navigator.mozConnection||navigator.webkitConnection;t&&t.type&&(N.akamai.connectivity=t.type,t.addEventListener("typechange",Ht))}}else navigator.geolocation&&null!=r&&(navigator.geolocation.clearWatch(r),r=null,t.removeEventListener("typechange",Ht))}(e),u&&N.objectBased){ot("enableLocation("+e+")","API");var t={methodName:"enableLocation",enable:e};this.processLogs({api:"reportAPI",value:t})}},this.enableManifestRequest=function(e){d=e},this.setURLManifest=function(e){c=e},this.handleSessionInit=function(a,i){try{if(a&&("object"!=typeof e&&(e={}),a.streamHeadPosition&&(e.streamHeadPosition=a.streamHeadPosition),a.streamLength&&(e.streamLength=a.streamLength),a.streamURL&&(e.streamURL=a.streamURL),a.bytesLoaded&&(e.bytesLoaded=a.bytesLoaded),a.customDataFunction&&(e.customDataFunction=a.customDataFunction),e.customDataFunction&&(M=e.customDataFunction),a.firstBitRate&&(e.firstBitRate=a.firstBitRate),e.firstBitRate&&xt(e.firstBitRate,i)),u&&N.objectBased){setTimeout((function(e){e.setDiagnoserWindowLoaded(!0),e.processLogs({api:"setConfigXML",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH});var a="";a+=!0===N.objectBased?"JS-":"HTML5-",a+=t,0!=o.length&&0!=l.length&&(a+=":",a+=o,a+="-",a+=l),e.processLogs({api:"setCurrentVersion",value:a}),e.processLogs({api:"setCustomDimension",value:x}),e.processLogs({api:"reportSetupParams",value:AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH}),e.processLogs({api:"reportSetupParams",value:G.beaconUrl.toLowerCase()}),e.processLogs({api:"reportSetupParams",value:n})}),3e3,this),ot("handleSessionInit()","API");var r={methodName:"handleSessionInit",callback:a};void 0!==i&&(r.epochTime=i),self.processLogs({api:"reportAPI",value:r},m)}Mt(N,i)}catch(e){}},this.handleBitRateSwitch=function(e,t){if(xt(e,t),u&&N.objectBased){ot("handleBitRateSwitch("+e+")","API");var a={methodName:"handleBitRateSwitch",bitRate:e};void 0!==t&&(a.epochTime=t),this.processLogs({api:"reportAPI",value:a})}},this.handlePlaying=function(e){if(Mt(N,e),Bt(N,e),u&&N.objectBased){ot("handlePlaying()","API");var t={methodName:"handlePlaying"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},m)}},this.handlePlayEnd=function(e,t){if(N.objectBased&&(N.endReason=e),Ot(N,t),u&&N.objectBased){ot("handlePlayEnd("+e+")","API");var a={methodName:"handlePlayEnd",endReasonCode:e};"undefined"!=typeof bitRateSwitchEpochTime&&(a.epochTime=t),this.processLogs({api:"reportAPI",value:a})}},this.handleMediaChangedEvent=function(){Ut(N)},this.handlePause=function(e){if(Rt(N,e),u&&N.objectBased){ot("handlePause()","API");var t={methodName:"handlePause"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},m)}},this.handleResume=function(e){if(Mt(N,e),Bt(N,e),u&&N.objectBased){ot("handleResume()","API");var t={methodName:"handleResume"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t})}},this.handleBufferStart=function(e){if(Dt(N,e),u&&N.objectBased){ot("handleBufferStart()","API");var t={methodName:"handleBufferStart"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},m)}},this.handleBufferEnd=function(e){if(Mt(N,e),Bt(N,e),u&&N.objectBased){ot("handleBufferEnd()","API");var t={methodName:"handleBufferEnd"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t})}},this.handleError=function(e){try{if(N.objectBased?N.errorReason=e:N.externalError=e,Nt(N),u&&N.objectBased){ot("handleError("+e+")","API");var t={methodName:"handleError",errorReason:e};this.processLogs({api:"reportAPI",value:t},m)}}catch(e){}},this.handleTimeupdateEvent=function(){Wt(N)},this.updateAdObject=function(e){ea(e)},this.handleAdLoaded=function(e,t){try{if(Zt(e,t),u&&N.objectBased){ot("handleAdLoaded()","API");var a={methodName:"handleAdLoaded",adSetDataObj:e};void 0!==t&&(a.epochTime=t),this.processLogs({api:"reportAPI",value:a})}}catch(e){}},this.handleAdStarted=function(e,t){if(function(e,t){try{ot("handle Ad Started");var a=C(t);fe.isAdStarted=!0,fe.isAdLoaded||(ot("handleAdLoaded API is missing.|We have identified that handleAdStarted API is called without handleAdLoaded.|Kindly ensure that handleAdLoaded API is called for every Ad and relevant adObject is passed as an argument.","WARN"),Zt(e,a)),fe.playBucket="0",fe.adStartTime=a,fe.adStartupTime=a-fe.adLoadTime,fe.startPos=Qt(N),ea(e)}catch(e){ot("Exception,handle ad started:"+e)}}(e,t),u&&N.objectBased){ot("handleAdStarted()","API");var a={methodName:"handleAdStarted",adSetDataObj:e};void 0!==t&&(a.epochTime=t),this.processLogs({api:"reportAPI",value:a},m)}},this.handleAdCompleted=function(e){if(function(e){try{ot("handleAdEnded"),"0"==fe.playBucket&&ot("Ad Progress related APIs not called.|We have identified that handleAdFirstQuartile,handleAdMidPoint & handleAdThirdQuartile APIs have not been called.|It will be good if these APIs are called in order to capture more accurate Ad information","WARN"),fe.playBucket="4",ta("0",e)}catch(e){ot("Exception,handle ad completed:"+e)}}(e),u&&N.objectBased){ot("handleAdCompleted()","API");var t={methodName:"handleAdCompleted"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t})}},this.handleAdFirstQuartile=function(){if(function(){fe.isAdStarted||ot("handleAdStarted API is missing.|We have identified that handleAdFirstQuartile API is called without handleAdStarted.|Kindly ensure that handleAdStarted API is called for every Ad that starts successfully.","ERROR");fe.playBucket="1"}(),u&&N.objectBased){ot("handleAdFirstQuartile()","API");this.processLogs({api:"reportAPI",value:{methodName:"handleAdFirstQuartile"}},m)}},this.handleAdMidPoint=function(){if(fe.playBucket="2",u&&N.objectBased){ot("handleAdMidPoint()","API");this.processLogs({api:"reportAPI",value:{methodName:"handleAdMidPoint"}})}},this.handleAdThirdQuartile=function(){if(fe.playBucket="3",u&&N.objectBased){ot("handleAdThirdQuartile()","API");this.processLogs({api:"reportAPI",value:{methodName:"handleAdThirdQuartile"}},m)}},this.handleAdStopped=function(e){if(function(e){ta("1",e)}(e),u&&N.objectBased){ot("handleAdStopped()","API");var t={methodName:"handleAdStopped"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t})}},this.handleAdError=function(e){if(function(e){ta("3",e)}(e),u&&N.objectBased){ot("handleAdError()","API");var t={methodName:"handleAdError"};void 0!==e&&(t.epochTime=e),this.processLogs({api:"reportAPI",value:t},m)}},this.handleSetupAISEvent=function(e,t,a){!function(e,t,a){try{var i=me.aisRequestLimit,n=me.aisRequestInterval;if((me=new ue).aisRequestInterval=n,me.aisRequestLimit=i,!e)return void ot("return from ais, platform is null");me.platform=e,me.version=t||"1.0",a&&(me.aisCustomDataObj=a),me.requestUrl="http://idp.securetve.com/rest/",me.initUrl=me.requestUrl+me.version+"/"+me.platform+"/init/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISInitRequest",me.identityUrl=me.requestUrl+me.version+"/"+me.platform+"/identity/?format=jsonp&responsefield=akaMediaAnalytics.receiveAISIdentityRequest",me.initUrlId="AkamaiAISInitUrl",me.identityUrlId="AkamaiAISIdentityUrl",zt(me.initUrl,me.initUrlId)}catch(e){me.requestFailed=!0}}(e,t,a)},this.getStream=function(){return N.akamai.stream},this.getChildWindow=function(){return f},this.setDiagnoserWindowLoaded=function(e){g=e},this.isDiagnoserWindowLoaded=function(){return g},this.getHostedUrl=function(){return m},this.pushToMessageStore=function(e){p.push(e)},this.getMessageStoreLength=function(){return p.length},this.flushMessageStore=function(){p=[]},this.getStoredMessageAt=function(e){return p[e]},this.getShouldAnalyze=function(){return u},this.processLogs=function(e){try{if(this.isDiagnoserWindowLoaded()){var t=this.getMessageStoreLength(),a=this.getChildWindow();if(a){if(t>0){for(i=0;i<t;i++)a.postMessage(this.getStoredMessageAt(i),this.getHostedUrl());this.flushMessageStore()}a.postMessage(e,this.getHostedUrl())}}else this.pushToMessageStore(e)}catch(e){}},this.receiveAISInitRequest=function(e){try{if(me.initObj=e,Xt(me.initUrlId),""==me.initObj||null==me.initObj)return void(me.requestFailed=!0);if(me.requestFailed)return;if(me.initObj.authenticated){if(me.akamai={},me.akamai.ais_queryToken=me.initObj.querytoken,me.initObj.idps){var t=me.initObj.idps;for(var a in t)me.akamai.ais_idpId=a,me.akamai.ais_idpName=t[a].name,me.akamai.ais_idpDisplayName=t[a].display_name,me.akamai.ais_idpUrl=t[a].url}zt(me.identityUrl,me.identityUrlId)}else me.requestFailed||(ot("receiveAISInitRequest, retrying the request"),++me.aisRetries,me.aisRetries<me.aisRequestLimit&&(me.retryTimer=Oe(zt,me.aisRequestInterval,[me.initUrl,me.initUrlId])))}catch(e){me.requestFailed=!0}},this.receiveAISIdentityRequest=function(e){try{if(me.identityObj=e,Xt(me.identityUrlId),null==e||""==e)return;me.akamai||(me.akamai={}),e.indentity&&e.identity.aisuid&&(me.akamai.ais_aisuid=e.identity.aisuid),function(){var e,t,a={};try{if(me&&me.aisCustomDataObj)for(var i in me.akamai||(me.akamai={}),me.aisCustomDataObj)if("INIT"==(e=me.aisCustomDataObj[i].split("/"))[0]&&me.initObj?a=me.initObj:"IDENTITY"==e[0]&&me.identityObj&&(a=me.identityObj),a){for(t=1;t<e.length;t++)e[t]&&a[e[t]]&&(a=a[e[t]]);"object"!=typeof a&&(me.akamai[i]=a)}}catch(e){ot("Exception,  populateAISCustomData"+e)}}()}catch(e){me.requestFailed=!0}},this.subscribeVideoObject=function(e){try{e&&aa(e)}catch(e){}},function(){try{N.objectBased||N.videoPassed?ia():(ot("adding MediaEventListeners: DOMContentLoaded"),document.addEventListener("DOMContentLoaded",ia,!1),ot("adding MediaEventListeners: Load"),document.addEventListener("load",ia,!0))}catch(e){ot("Exception,  Addding DOMContentLoaded and Load event listeners :"+e)}if(window)if(function(){try{if("iPad"==ut||"iPhone"==ut)return!0}catch(e){return!1}}())window.addEventListener("pagehide",oa,!1),window.addEventListener("pageshow",la,!1);else if("undefined"!=typeof akamaiBCVideoObject&&window.addEventListener)window.addEventListener("beforeunload",sa,!1);else if(window.addEventListener)try{ve()?window.parent.addEventListener("beforeunload",sa,!1):window.addEventListener("beforeunload",sa,!1)}catch(e){ot("Exception, add window document listeners : "+e),window.addEventListener("beforeunload",sa,!1)}else if(window.attachEvent)try{ve()?window.parent.attachEvent("onbeforeunload",sa):window.attachEvent("onbeforeunload",sa)}catch(e){window.attachEvent("onbeforeunload",sa)}}()}function setAkamaiMediaAnalyticsData(e,t,a){try{if(akaMediaAnalytics&&(akaMediaAnalytics.setData(e,t),akaMediaAnalytics.getShouldAnalyze())){var i={methodName:"setAkamaiMediaAnalyticsData"};i[e]=t,akaMediaAnalytics.processLogs({api:"reportAPI",value:i})}}catch(e){}}function akamaiPlaybackCompleted(){try{if(akaMediaAnalytics&&(akaMediaAnalytics.handlePlayEnd(),akaMediaAnalytics.getShouldAnalyze())){var e={methodName:"akamaiPlaybackCompleted",endReasonCode:endReason};akaMediaAnalytics.processLogs({api:"reportAPI",value:e})}}catch(e){}}function akamaiGetViewerId(){try{var e=null;akaMediaAnalytics&&(e=akaMediaAnalytics.getViewerId())}catch(e){}return e}function akamaiSetStreamURL(e,t){try{null!=e&&""!=e&&setAkamaiMediaAnalyticsData("streamURL",e),akaMediaAnalytics&&void 0!==t&&akaMediaAnalytics.enableManifestRequest(t)}catch(e){}}function akamaiSetURLManifest(e){try{akaMediaAnalytics&&akaMediaAnalytics.setURLManifest(e)}catch(e){}}function akamaiSetViewerId(e){if(null!=e&&""!=e||(e="-"),akaMediaAnalytics&&(akaMediaAnalytics.setData("viewerId",e),akaMediaAnalytics.setData("clientId",e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiSetViewerId"};t.viewerId=e,akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiSetViewerDiagnosticsId(e){if(null!=e&&""!=e||(e="-"),akaMediaAnalytics&&(akaMediaAnalytics.setData("viewerDiagnosticsId",e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiSetViewerDiagnosticsId"};t.viewerDiagnosticsId=e,akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiUpdateAdObject(e){akaMediaAnalytics&&akaMediaAnalytics.updateAdObject(e)}function akamaiHandleAdStarted(e){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdStarted(e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiHandleAdStarted",adSetDataObj:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiHandleAdCompleted(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdCompleted(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdCompleted"}})}}function akamaiHandleAdLoaded(e){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdLoaded(e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiHandleAdLoaded",adSetDataObj:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiHandleAdFirstQuartile(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdFirstQuartile(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdFirstQuartile"}})}}function akamaiHandleAdMidPoint(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdMidPoint(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdMidPoint"}})}}function akamaiHandleAdThirdQuartile(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdThirdQuartile(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdThirdQuartile"}})}}function akamaiHandleAdError(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdError(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdError"}})}}function akamaiHandleAdStopped(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleAdStopped(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleAdStopped"}})}}function akamaiHandleStreamSwitch(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleStreamSwitch(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleStreamSwitch"}})}}function akamaiHandleTitleSwitch(e){if(akaMediaAnalytics&&(akaMediaAnalytics.handleTitleSwitch(e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiHandleTitleSwitch",customData:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiSetupAIS(e,t,a){akaMediaAnalytics&&akaMediaAnalytics.handleSetupAISEvent(e,t,a)}function akamaiHandleBitRateSwitch(e){if(akaMediaAnalytics&&(akaMediaAnalytics.handleBitRateSwitch(e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiHandleBitRateSwitch",bitRate:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiHandleApplicationExit(){if(akaMediaAnalytics&&(akaMediaAnalytics.handleApplicationExit(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiHandleApplicationExit"}})}}function akamaiSetVideoObject(e){akaMediaAnalytics&&akaMediaAnalytics.subscribeVideoObject(e)}function akamaiSubscribeVideoObject(e){akaMediaAnalytics&&akaMediaAnalytics.subscribeVideoObject(e)}function akamaiEnableLocation(e){if(akaMediaAnalytics&&(akaMediaAnalytics.enableLocation(e),akaMediaAnalytics.getShouldAnalyze())){var t={methodName:"akamaiEnableLocation",enable:enable};akaMediaAnalytics.processLogs({api:"reportAPI",value:t})}}function akamaiDisableServerIpLookup(){try{if(akaMediaAnalytics&&(akaMediaAnalytics.disableServerIpLookUp(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiDisableServerIpLookup"}})}}catch(e){}}function akamaiEnableServerIpLookup(){try{if(akaMediaAnalytics&&(akaMediaAnalytics.enableServerIpLookUp(),akaMediaAnalytics.getShouldAnalyze())){akaMediaAnalytics.processLogs({api:"reportAPI",value:{methodName:"akamaiEnableServerIpLookup"}})}}catch(e){}}function akamaiHandleError(e){try{akaMediaAnalytics&&akaMediaAnalytics.handleError(e)}catch(e){}}function fragmentDownloadStarted(e){akamaiFragmentDownloadStarted(e)}function fragmentDownloadCompleted(e){akamaiFragmentDownloadCompleted(e)}function akamaiFragmentDownloadStarted(e){var t=akaMediaAnalytics.getStream();if(t&&e&&(t.streamFragmentDownloadStarted(e),akaMediaAnalytics.getShouldAnalyze())){var a={methodName:"akamaiFragmentDownloadStarted",bitRate:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}function akamaiFragmentDownloadCompleted(e){var t=akaMediaAnalytics.getStream();if(t&&e&&(t.streamFragmentDownloadCompleted(e),akaMediaAnalytics.getShouldAnalyze())){var a={methodName:"akamaiFragmentDownloadCompleted",bitRate:e};akaMediaAnalytics.processLogs({api:"reportAPI",value:a})}}("undefined"!=typeof akamaiBCVideoObject||"undefined"!=typeof AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH&&-1==AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("enableGenericAPI=1")&&-1==AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH.indexOf("subscribeVideo"))&&(akaMediaAnalytics=new AkaHTML5MediaAnalytics(null));